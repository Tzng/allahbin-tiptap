"use strict";(self.webpackChunk_allahbin_tiptap=self.webpackChunk_allahbin_tiptap||[]).push([[433],{25710:function(Se,Y,r){r.r(Y);var oe=r(48305),U=r.n(oe),he=r(16757),E=r(50959),x=r(11527),T={margin:"0 10px",padding:"5px 10px",border:"1px solid #ccc",borderRadius:"5px",cursor:"pointer"};Y.default=function(){var fe=(0,E.useState)(),te=U()(fe,2),ne=te[0],$=te[1],ae=(0,E.useState)("html"),ve=U()(ae,2),d=ve[0],w=ve[1],me=(0,E.useState)(),D=U()(me,2),z=D[0],C=D[1],a=(0,E.useState)(),h=U()(a,2),v=h[0],B=h[1],A=(0,E.useState)(),y=U()(A,2),H=y[0],V=y[1],O=(0,E.useState)(!0),F=U()(O,2),M=F[0],Z=F[1],W=(0,E.useState)(!0),le=U()(W,2),Q=le[0],_e=le[1],ge=(0,E.useState)("normal"),q=U()(ge,2),be=q[0],Ae=q[1],de=E.useRef(),Ne=function(R,Be){console.log("onChange",R,Be),$(R),He()},Fe=function(R){V(R),$(R)},Oe=function(R){C(R),$(R)},Ie=function(R){if(!R.includes("{")){B("");return}try{B(R);var Be=JSON.parse(R);$(Be)}catch(ze){console.log("\u65E0\u6548json")}},He=function(){V(de.current.getHTML()),C(de.current.getMarkdown()),B(JSON.stringify(de.current.getJSON()))};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("span",{children:"\u8FD0\u884C\u7684\u6A21\u5F0F"}),"\xA0",(0,x.jsx)("button",{onClick:function(){return Z(!M)},children:"\u5207\u6362\u6A21\u5F0F"}),(0,x.jsxs)("select",{onChange:function(R){Ae(R.target.value)},children:[(0,x.jsx)("option",{value:"normal",children:"normal"}),(0,x.jsx)("option",{value:"gov",children:"gov"}),(0,x.jsx)("option",{value:"custom",children:"custom"})]}),(0,x.jsx)("button",{onClick:function(){return _e(!Q)},children:Q?"\u8FB9\u6846\u6A21\u5F0F":"\u65E0\u8FB9\u6846"})]}),(0,x.jsx)(he.ZP,{onReady:function(R){window.editor=R,de.current=R},renderMode:be,mode:d,value:ne,onChange:Ne,editable:M,bordered:Q}),(0,x.jsxs)("div",{style:{marginTop:12},children:[(0,x.jsx)("button",{style:T,onClick:function(){w("html"),Fe("<p>123</p>")},children:"\u8D4B\u503Chtml"}),(0,x.jsx)("button",{style:T,onClick:function(){w("md"),Oe("! \u4F60\u597D")},children:"\u8D4B\u503Cmd"}),(0,x.jsx)("button",{style:T,onClick:function(){w("json"),Ie('{"type":"doc","content":[{"type":"paragraph","attrs":{"textAlign":"left","indent":0},"content":[{"type":"text","text":"\u963F\u8428\u8FBE\u963F\u8428\u5927\u5927\u548B\u6253\u6253\u7B97111"},{"type":"text","marks":[{"type":"link","attrs":{"href":"\u963F\u8428\u5927\u5927","target":"_blank","data-id":123131321}}],"text":"\u963F\u8428\u5927\u5927"}]}]}')},children:"\u8D4B\u503Cjson"}),(0,x.jsx)("button",{style:T,id:"parseContentToInputBox",onClick:He,children:"\u89E3\u6790\u6570\u636E\u5230\u8F93\u5165\u6846"})]}),(0,x.jsx)("h3",{children:"jsonValue"}),(0,x.jsx)("textarea",{id:"jsonValue",value:v,onChange:function(R){return Ie(R.target.value)},style:{width:"100%"},rows:4}),(0,x.jsx)("h3",{children:"htmlValue"}),(0,x.jsx)("textarea",{id:"htmlValue",value:H,onChange:function(R){return Fe(R.target.value)},style:{width:"100%"},rows:4}),(0,x.jsx)("h3",{children:"mdValue"}),(0,x.jsx)("textarea",{id:"mdValue",value:z,onChange:function(R){return Oe(R.target.value)},style:{width:"100%"},rows:4})]})}},69613:function(Se,Y,r){r.r(Y);var oe=r(48305),U=r.n(oe),he=r(50959),E=r(16636),x=r(11527),T=function(){var te=(0,he.useState)(""),ne=U()(te,2),$=ne[0],ae=ne[1];return(0,x.jsxs)("div",{style:{padding:20},children:[(0,x.jsx)("h2",{children:"\u7B80\u5355\u6A21\u5F0F\u793A\u4F8B"}),(0,x.jsxs)("div",{style:{maxWidth:600,margin:"20px auto",border:"1px solid #eee",borderRadius:4},children:[(0,x.jsx)("h3",{children:"\u804A\u5929\u8F93\u5165\u6846\uFF08\u7981\u7528\u6240\u6709\u590D\u6742\u529F\u80FD\uFF09"}),(0,x.jsx)(E.Z,{simple:!0,height:120,editable:!0,bordered:!1,value:$,onChange:function(d){ae(d),console.log("\u8F93\u5165\u5185\u5BB9\uFF1A",d)},style:{boxShadow:"none",padding:"8px 12px"}})]}),(0,x.jsxs)("div",{style:{maxWidth:600,margin:"20px auto"},children:[(0,x.jsx)("h3",{children:"\u5F53\u524D\u8F93\u5165\u5185\u5BB9\u9884\u89C8\uFF1A"}),(0,x.jsx)("pre",{style:{background:"#f5f5f5",padding:16,borderRadius:4,overflow:"auto"},children:JSON.stringify($,null,2)})]})]})};Y.default=T},22261:function(Se,Y,r){r.r(Y);var oe=r(48305),U=r.n(oe),he=r(25298),E=r.n(he),x=r(17069),T=r.n(x),fe=r(21742),te=r.n(fe),ne=r(83136),$=r.n(ne),ae=r(16757),ve=r(99099),d=r(50959),w=r(11527),me={marginTop:"10px",padding:"5px 10px",border:"1px solid #ccc",borderRadius:"5px"},D=function(a){te()(v,a);var h=$()(v);function v(){return E()(this,v),h.apply(this,arguments)}return T()(v,[{key:"renderLink",value:function(A,y,H){return(0,w.jsx)("span",{rel:"noopener noreferrer nofollow",style:{color:"#e01818"},children:H})}}]),v}(ve.ZP),z=new D,C='<table style="width: 529px"><colgroup><col style="100px"><col style="429px"></colgroup><tbody><tr><td colspan="2" rowspan="1" colwidth="100,429"><p>11</p></td></tr><tr><td colspan="1" rowspan="1" colwidth="100"><p style="text-align: center">2</p></td><td colspan="1" rowspan="1" colwidth="429"><p>3</p></td></tr></tbody></table><table style="width: 200px"><colgroup><col style="100px"><col style="100px"></colgroup><tbody><tr><td colspan="2" rowspan="1" colwidth="100,100"><p>11</p></td></tr><tr><td colspan="1" rowspan="1" colwidth="100"><p>1</p></td><td colspan="1" rowspan="1" colwidth="100"><p>1</p></td></tr></tbody></table><table style="width: 432px"><colgroup><col style="178px"><col style="254px"></colgroup><tbody><tr><td colspan="1" rowspan="1" colwidth="178"><p>\u554A</p></td><td colspan="1" rowspan="1" colwidth="254"><p>11</p></td></tr><tr><td colspan="1" rowspan="1" colwidth="178"><p>212312</p></td><td colspan="1" rowspan="1" colwidth="254"><p>\u8BD5\u8BD5</p></td></tr></tbody></table><p>\u7B2C\u4E94\u5341\u6761 <a target="_blank" rel="noopener noreferrer nofollow" href="%EF%BC%82%2Fsearch?channelid=3&amp;searchword=bbrq=%281998%2E09%2E01%20to%202009%2E05%2E01%29%20and%20%E6%AD%A3%E6%96%87=%28%27%E4%B8%AD%E5%8D%8E%E4%BA%BA%E6%B0%91%E5%85%B1%E5%92%8C%E5%9B%BD%E6%B6%88%E9%98%B2%E6%B3%95%27%20pre%2F16%20%E7%AC%AC%E4%BA%94%E5%8D%81%E6%9D%A1%2B%27%E6%B6%88%E9%98%B2%E6%B3%95%27%20pre%2F16%20%E7%AC%AC%E4%BA%94%E5%8D%81%E6%9D%A1%2B%27%E4%B8%AD%E5%8D%8E%E4%BA%BA%E6%B0%91%E5%85%B1%E5%92%8C%E5%9B%BD%E6%B6%88%E9%98%B2%E6%B3%95%EF%BC%88%EF%BC%92%EF%BC%90%EF%BC%90%EF%BC%98%E5%B9%B4%EF%BC%89%27%20pre%2F16%20%E7%AC%AC%E4%BA%94%E5%8D%81%E6%9D%A1%2B%27%E4%B8%AD%E5%8D%8E%E4%BA%BA%E6%B0%91%E5%85%B1%E5%92%8C%E5%9B%BD%E6%B6%88%E9%98%B2%E6%B3%95%EF%BC%88%EF%BC%92%EF%BC%90%EF%BC%91%EF%BC%99%E5%B9%B4%EF%BC%89%27%20pre%2F16%20%E7%AC%AC%E4%BA%94%E5%8D%81%E6%9D%A1%2B%27%E4%B8%AD%E5%8D%8E%E4%BA%BA%E6%B0%91%E5%85%B1%E5%92%8C%E5%9B%BD%E6%B6%88%E9%98%B2%E6%B3%95%EF%BC%88%EF%BC%92%EF%BC%90%EF%BC%92%EF%BC%91%E5%B9%B4%EF%BC%89%27%20pre%2F16%20%E7%AC%AC%E4%BA%94%E5%8D%81%E6%9D%A1%29%20not%20%E6%B3%95%E8%A7%84%E5%88%86%E7%B1%BB%E5%8F%B7=111601199801%EF%BC%82" data-id="">(8) </a>\u706B\u707E\u6251\u706D\u540E\uFF0C\u4E3A\u9690\u7792\u3001\u63A9\u9970\u8D77\u706B\u539F\u56E0\u3001\u63A8\u5378\u8D23\u4EFB\uFF0C\u6545\u610F\u7834\u574F\u73B0\u573A\u6216\u8005\u4F2A\u9020\u73B0\u573A\uFF0C\u5C1A\u4E0D\u6784\u6210\u72AF\u7F6A\u7684\uFF0C\u5904\u8B66\u544A\u3001\u7F5A\u6B3E\u6216\u8005\u5341\u4E94\u65E5\u4EE5\u4E0B\u62D8\u7559\u3002<br>\u5355\u4F4D\u6709\u524D\u6B3E\u884C\u4E3A\u7684\uFF0C\u5904\u8B66\u544A\u6216\u8005\u7F5A\u6B3E\uFF0C\u5E76\u5BF9\u5176\u76F4\u63A5\u8D1F\u8D23\u7684\u4E3B\u7BA1\u4EBA\u5458\u548C\u5176\u4ED6\u76F4\u63A5\u8D23\u4EFB\u4EBA\u5458\u4F9D\u7167\u524D\u6B3E\u7684\u89C4\u5B9A\u5904\u7F5A\u3002</p><p>\u7B2C\u4E94\u5341\u4E00\u6761 <a target="_blank" rel="noopener noreferrer nofollow" href="%EF%BC%82%2Fdetail?record=1&amp;channelid=3&amp;presearchword=bbrq=%281998%2E09%2E01%20to%202009%2E05%2E01%29%20and%20%E6%AD%A3%E6%96%87=%28%27%E4%B8%AD%E5%8D%8E%E4%BA%BA%E6%B0%91%E5%85%B1%E5%92%8C%E5%9B%BD%E6%B6%88%E9%98%B2%E6%B3%95%27%20pre%2F16%20%E7%AC%AC%E4%BA%94%E5%8D%81%E4%B8%80%E6%9D%A1%2B%27%E6%B6%88%E9%98%B2%E6%B3%95%27%20pre%2F16%20%E7%AC%AC%E4%BA%94%E5%8D%81%E4%B8%80%E6%9D%A1%2B%27%E4%B8%AD%E5%8D%8E%E4%BA%BA%E6%B0%91%E5%85%B1%E5%92%8C%E5%9B%BD%E6%B6%88%E9%98%B2%E6%B3%95%EF%BC%88%EF%BC%92%EF%BC%90%EF%BC%90%EF%BC%98%E5%B9%B4%EF%BC%89%27%20pre%2F16%20%E7%AC%AC%E4%BA%94%E5%8D%81%E4%B8%80%E6%9D%A1%2B%27%E4%B8%AD%E5%8D%8E%E4%BA%BA%E6%B0%91%E5%85%B1%E5%92%8C%E5%9B%BD%E6%B6%88%E9%98%B2%E6%B3%95%EF%BC%88%EF%BC%92%EF%BC%90%EF%BC%91%EF%BC%99%E5%B9%B4%EF%BC%89%27%20pre%2F16%20%E7%AC%AC%E4%BA%94%E5%8D%81%E4%B8%80%E6%9D%A1%2B%27%E4%B8%AD%E5%8D%8E%E4%BA%BA%E6%B0%91%E5%85%B1%E5%92%8C%E5%9B%BD%E6%B6%88%E9%98%B2%E6%B3%95%EF%BC%88%EF%BC%92%EF%BC%90%EF%BC%92%EF%BC%91%E5%B9%B4%EF%BC%89%27%20pre%2F16%20%E7%AC%AC%E4%BA%94%E5%8D%81%E4%B8%80%E6%9D%A1%29%20not%20%E6%B3%95%E8%A7%84%E5%88%86%E7%B1%BB%E5%8F%B7=111601199801#law_firsthit%EF%BC%82" data-id="">(1) </a>\u5BF9\u8FDD\u53CD\u672C\u6CD5\u89C4\u5B9A\u884C\u4E3A\u7684\u5904\u7F5A\uFF0C\u7531\u516C\u5B89\u6D88\u9632\u673A\u6784\u88C1\u51B3\u3002\u5BF9\u7ED9\u4E88\u62D8\u7559\u7684\u5904\u7F5A\uFF0C\u7531\u516C\u5B89\u673A\u5173\u4F9D\u7167 <a target="_blank" rel="noopener noreferrer nofollow" href="%EF%BC%82%2Fgolaw?dbnm=gjfg&amp;flid=111605199401%EF%BC%82" data-id="">\u6CBB\u5B89\u7BA1\u7406\u5904\u7F5A\u6761\u4F8B </a>\u7684\u89C4\u5B9A\u88C1\u51B3\u3002<br>\u8D23\u4EE4\u505C\u4EA7\u505C\u4E1A\uFF0C\u5BF9\u7ECF\u6D4E\u548C\u793E\u4F1A\u751F\u6D3B\u5F71\u54CD\u8F83\u5927\u7684\uFF0C\u7531\u516C\u5B89\u6D88\u9632\u673A\u6784\u62A5\u8BF7\u5F53\u5730\u4EBA\u6C11\u653F\u5E9C\u4F9D\u6CD5\u51B3\u5B9A\uFF0C\u7531\u516C\u5B89\u6D88\u9632\u673A\u6784\u6267\u884C\u3002</p>';Y.default=function(){var a=(0,d.useState)(""),h=U()(a,2),v=h[0],B=h[1],A=(0,d.useState)(),y=U()(A,2),H=y[0],V=y[1],O=d.useRef(),F=function(W,le){console.log("onChange",W,le),B(W),M()},M=function(){setTimeout(function(){V(O.current.getJSON())},200)};return console.log("jsonValue",H),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(ae.ZP,{onReady:function(W){window.editor=W,O.current=W},mode:"json",value:v,onChange:F}),(0,w.jsx)("button",{style:{marginTop:10},onClick:function(){return F(C,O)},children:"\u6E32\u67D3\u5230div\u4E2D"}),(0,w.jsx)("div",{style:me,children:(0,ae.AM)(H)}),(0,w.jsx)("h4",{children:"\u81EA\u5B9A\u4E49\u6E32\u67D3\u51FD\u6570"}),(0,w.jsx)("div",{style:me,children:z.render(H)})]})}},16636:function(Se,Y,r){r.d(Y,{Z:function(){return Gt}});var oe=r(15558),U=r.n(oe),he=r(26068),E=r.n(he),x=r(48305),T=r.n(x),fe=r(67825),te=r.n(fe),ne=r(90228),$=r.n(ne),ae=r(87999),ve=r.n(ae),d=r(50959),w=r(85378),me=r(80398),D=r(52063),z=D.NB.create({name:"ATail",addOptions:function(){return{HTMLAttributes:{class:"a-tiptap-tail"}}},content:"inline*",group:"block",defining:!0,parseHTML:function(){return[{tag:"div.a-tiptap-tail",getAttrs:function(t){return{class:"a-tiptap-tail"}}}]},renderHTML:function(e){var t=e.node,i=e.HTMLAttributes,n=E()(E()({},i),{},{class:"a-tiptap-tail"});return["div",n,0]},addCommands:function(){var e=this;return{setATail:function(){return function(i){var n=i.commands;return n.setNode(e.name,{})}},toggleATail:function(){return function(i){var n=i.commands;return n.toggleNode(e.name,"paragraph",{})}}}},addInputRules:function(){return[(0,D.zK)({find:/^!-\s$/,type:this.type,getAttributes:function(){return{class:"a-tiptap-tail"}}})]}}),C=D.NB.create({name:"ATitle",addOptions:function(){return{levels:[1,2,3],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes:function(){return{level:{default:1,rendered:!1}}},parseHTML:function(){return console.log("parseHTML"),this.options.levels.map(function(e){return{tag:"div.a-tiptap-title".concat(e),attrs:{level:e,class:"a-tiptap-title".concat(e)}}})},renderHTML:function(e){var t=e.node,i=e.HTMLAttributes;console.log("renderHTML");var n=this.options.levels.includes(t.attrs.level),o=n?t.attrs.level:this.options.levels[0];return["div",(0,D.P1)(this.options.HTMLAttributes,i,{class:"a-tiptap-title".concat(o)}),0]},addCommands:function(){var e=this;return{setATitle:function(i){return function(n){var o=n.commands;return console.log("setHeading"),e.options.levels.includes(i.level)?o.setNode(e.name,i):!1}},toggleATitle:function(i){return function(n){var o=n.commands;return e.options.levels.includes(i.level)?o.toggleNode(e.name,"paragraph",i):!1}}}},addInputRules:function(){var e=this;return this.options.levels.map(function(t){return(0,D.zK)({find:new RegExp("^(!{1,".concat(t,"})\\s$")),type:e.type,getAttributes:{level:t,class:"a-tiptap-title".concat(t)}})})}}),a=D.NB.create({name:"AWenHao",addOptions:function(){return{HTMLAttributes:{class:"a-tiptap-wenhao"}}},content:"inline*",group:"block",defining:!0,parseHTML:function(){return[{tag:"div.a-tiptap-wenhao",getAttrs:function(t){return{class:"a-tiptap-wenhao"}}}]},renderHTML:function(e){var t=e.node,i=e.HTMLAttributes,n=E()(E()({},i),{},{class:"a-tiptap-wenhao"});return["div",n,0]},addCommands:function(){var e=this;return{setWenHao:function(){return function(i){var n=i.commands;return n.setNode(e.name,{})}},toggleWenHao:function(){return function(i){var n=i.commands;return n.toggleNode(e.name,"paragraph",{})}}}},addInputRules:function(){return[(0,D.zK)({find:/^!~\s$/,type:this.type,getAttributes:function(){return{class:"a-tiptap-wenhao"}}})]}}),h=r(68923),v=r(62308),B=r(76753),A=r(99288),y=r(67223),H=r(74972),V=r(5283),O=r(71392),F=r(25514),M=r(22623),Z=r(86674),W=r(36009),le=r(68457),Q=r(6734),_e=r(35260),ge=r(97517),q=r(62023),be=r(83113),Ae=r(88698),de=r(14842),Ne=r(13067),Fe=r(83356),Oe=r(86520),Ie=r(83608),He=r(37176),J=r(63063),R=r(67737),Be=r(96063),ze=r(51823),it=r(83994),De=r(3317),st=D.hj.create({name:"markdownClipboardCopy",addProseMirrorPlugins:function(){var e=this;return[new De.Sy({key:new De.H$("markdownClipboardCopy"),props:{clipboardTextSerializer:function(i){var n,o,l=e.editor.schema.topNodeType.createAndFill(void 0,i.content);return l&&((n=e.editor.storage.markdown)===null||n===void 0||(o=n.getMarkdown)===null||o===void 0?void 0:o.call(n,l))||""}}})]}}),Ve=r(83578),ot=r(335),je=r.n(ot),lt=function(e){return e.schema.nodes.codeBlock&&(0,D.Ig)(e,"codeBlock")||e.schema.marks.code&&(0,D.yw)(e,"code")},dt=function(e){var t=e.match(/^```/gm);if(t&&t.length>1||e.match(/\[[^]+]\(https?:\/\/\S+\)/gm)||e.match(/\[[^]+]\(\/\S+\)/gm)||e.match(/^#{1,6}\s+\S+/gm)||e.match(/^!{1,3}\s+\S+/gm)||e.match(/^!-\s+\S+$/gm)||e.match(/^!~\s+\S+$/gm))return!0;var i=e.match(/^\s*[\d-*]\s+\S+/gm);if(i&&i.length>1)return!0;var n=e.match(/^\s*[-*]\s\[[ xX]\]\s+\S+/gm);return!!(n&&n.length>1||e.match(/^>\s+\S+/gm)||e.match(/^---/gm)||e.match(/^!\[[^]+]\(https?:\/\/\S+\)/gm)||e.match(/^\|.*\|$/gm)||e.match(/\*\*[^]+?\*\*/gm)||e.match(/_[^]+?_/gm)||e.match(/~~[^]+?~~/gm)||e.match(/`[^]+?`/gm))},ut=function(e){var t=/<div class="a-tiptap-title(\d)">([\s\S]*?)<\/div>/g,i=e.matchAll(t),n=e,o=je()(i),l;try{for(o.s();!(l=o.n()).done;){var s=l.value,m=parseInt(s[1]),u=s[2].trim(),f="".concat("!".repeat(m)," ").concat(u);n=n.replace(s[0],f)}}catch(g){o.e(g)}finally{o.f()}return n},ct=function(e){var t=/<div class="a-tiptap-wenhao">([\s\S]*?)<\/div>/g,i=e.matchAll(t),n=e,o=je()(i),l;try{for(o.s();!(l=o.n()).done;){var s=l.value,m=s[1].trim().length,u=s[1].trim(),f="".concat("!~".repeat(m>1?1:m)," ").concat(u);n=n.replace(s[0],f)}}catch(g){o.e(g)}finally{o.f()}return n},pt=function(e){var t=/<div class="a-tiptap-tail">([\s\S]*?)<\/div>/g,i=e.matchAll(t),n=e,o=je()(i),l;try{for(o.s();!(l=o.n()).done;){var s=l.value,m=s[1].trim(),u="!- ".concat(m);n=n.replace(s[0],u)}}catch(f){o.e(f)}finally{o.f()}return n},Je=function(e){var t=/^!-\s+(.*)$/gm,i=e.matchAll(t),n=e,o=je()(i),l;try{for(o.s();!(l=o.n()).done;){var s=l.value,m=s[1].trim(),u='<div class="a-tiptap-tail">'.concat(m,"</div>");n=n.replace(s[0],u)}}catch(f){o.e(f)}finally{o.f()}return n},Ze=function(e){var t=/^!~\s+(.*)$/gm,i=e.matchAll(t),n=e,o=je()(i),l;try{for(o.s();!(l=o.n()).done;){var s=l.value,m=s[1].trim(),u='<div class="a-tiptap-wenhao">'.concat(m,"</div>");n=n.replace(s[0],u)}}catch(f){o.e(f)}finally{o.f()}return n},Ge=function(e){var t=/^(!{1,3})\s+(.*)$/gm,i=e,n=e.matchAll(t),o=je()(n),l;try{for(o.s();!(l=o.n()).done;){var s=l.value,m=s[1],u=m.length,f=s[2].trim(),g='<div class="a-tiptap-title'.concat(u,'">').concat(f,"</div>");i=i.replace(s[0],g)}}catch(_){o.e(_)}finally{o.f()}return i},ht=D.hj.create({name:"markdownClipboardPaste",priority:50,addProseMirrorPlugins:function(){var e=this;return[new De.Sy({key:new De.H$("markdownClipboardPaste"),props:{handlePaste:function(i,n){var o=e.editor.isEditable,l=n.clipboardData;if(!o||!l||l.files.length!==0)return!1;var s=l.getData("text/plain"),m=l.getData("text/html");if(m.length>0)return!1;if(lt(i.state))return n.preventDefault(),i.dispatch(i.state.tr.insertText(s)),!0;if(dt(s)){var u,f,g=Je(s);g=Ze(g),g=Ge(g);var _=(u=e.editor.storage.markdown)===null||u===void 0||(u=u.parser)===null||u===void 0||(f=u.parse)===null||f===void 0?void 0:f.call(u,g,{inline:!1});if(console.log("html",_),!_||typeof _!="string")return!1;var L=Ve.aw.fromSchema(e.editor.schema),I=(0,D.q_)(_),S=L.parse(I,{});console.log("node",S);var K=S.content,j=i.state.selection.content();return i.dispatch(i.state.tr.replaceSelection(new Ve.p2(K,j.openStart,j.openEnd))),!0}return!1}}})]}}),ft=it.U.extend({name:"markdown",priority:50,addOptions:function(){var e;return E()(E()({},(e=this.parent)===null||e===void 0?void 0:e.call(this)),{},{paste:!0,copy:!0})},onBeforeCreate:function(){var e,t=this;(e=this.parent)===null||e===void 0||e.call(this),this.editor.storage.markdown.getMarkdown=function(i){var n=t.editor.storage.markdown.serializer.serialize(i!=null?i:t.editor.state.doc);return n=ut(n),n=ct(n),n=pt(n),n}},addExtensions:function(){return[].concat(U()(this.options.copy?[st]:[]),U()(this.options.paste?[ht]:[]))},onCreate:function(){this.editor.options.content=this.editor.options.initialContent,delete this.editor.options.initialContent}}),vt=D.hj.create({name:"starterKit",addExtensions:function(){var e=[],t=[];if(this.options.commands!==!1&&e.push(h.Gh),this.options.highPriorityKeymap!==!1&&e.push(h.Yg),this.options.lowPriorityKeymap!==!1&&e.push(h.vR),this.options.document!==!1&&e.push(de.B),this.options.paragraph!==!1&&(e.push(J.n.configure(this.options.paragraph)),t.push("paragraph")),this.options.text!==!1&&e.push(Be.x),this.options.textAlign!==!1&&e.push(ze.P.configure(E()({types:["heading","paragraph"]},this.options.textAlign))),this.options.bold!==!1&&e.push(B.d8.configure(this.options.bold)),this.options.italic!==!1&&e.push(Z.Tx.configure(this.options.italic)),this.options.strike!==!1&&e.push(ge.Re.configure(this.options.strike)),this.options.code!==!1&&e.push(y.EK.configure(this.options.code)),this.options.link!==!1&&e.push(W.rU.configure(this.options.link)),this.options.heading!==!1&&(e.push(Ie.X.configure(this.options.heading)),t.push("heading")),this.options.blockquote!==!1&&(e.push(v.V6.configure(this.options.blockquote)),t.push("blockquote")),this.options.hardBreak!==!1&&e.push(Oe.U.configure(this.options.hardBreak)),this.options.horizontalRule!==!1&&(e.push(O.b.configure(this.options.horizontalRule)),t.push("horizontalRule")),this.options.listsIndentation!==!1&&e.push(Q.R_.configure(this.options.listsIndentation)),this.options.indentation!==!1&&e.push(M.I.configure(this.options.indentation)),this.options.bulletList!==!1&&e.push(A.D.configure(this.options.bulletList)),this.options.orderedList!==!1&&e.push(_e.G.configure(this.options.orderedList)),(this.options.bulletList!==!1||this.options.orderedList!==!1)&&e.push(le.H.configure(this.options.listItem)),this.options.taskList!==!1&&(e.push(R.a.configure(this.options.taskList)),e.push(be.Uf.configure(this.options.taskItem))),(this.options.bulletList!==!1||this.options.orderedList!==!1||this.options.taskList!==!1)&&t.push("list"),this.options.codeBlock!==!1&&(e.push(H.dn.configure(this.options.codeBlock)),t.push("codeBlock")),this.options.image!==!1&&(this.options.uploader!==!1?(e.push(F.Ee.configure(this.options.image)),t.push("image")):console.warn("Uploader extension is required for image extension. Please enable uploader extension.")),this.options.table!==!1){var i=q.pj.extend({content:"(".concat(t.join(" | "),")+")});e.push(q.iA.configure(this.options.table)),e.push(q.SC.configure(this.options.tableRow)),e.push(i.configure(this.options.tableCell))}return this.options.emoji!==!1&&e.push(V.dy.configure(E()({enableEmoticons:!0,forceFallbackImages:!1,suggestion:V.Jz},this.options.emoji))),this.options.history!==!1&&e.push(He.A.configure(this.options.history)),this.options.dropcursor!==!1&&e.push(Ne.m.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&e.push(Fe.f),this.options.uploader!==!1&&e.push(Ae.Qm.configure(this.options.uploader)),this.options.markdown!==!1&&e.push(ft.configure(E()({linkify:!0,breaks:!0,tightLists:!0,paste:!0,copy:!1},this.options.markdown))),e}}),Xt=null,Xe=r(35605),b=r(24692),c=r(11527),mt=function(e){var t=e.className,i=e.style,n=e.title,o=(0,b.W6)(function(){return{isActive:function(){return(0,h.zh)(l.state,"link")},disabled:function(){return!l.state.schema.marks.link||!l.can().chain().focus().toggleMark("link").run()}}}),l=o.editor,s=o.statusMap;return(0,c.jsx)(b.o1,{className:t,style:i,children:(0,c.jsx)(b.u,{text:n||"\u94FE\u63A5 (".concat(b.WD," + K)"),children:(0,c.jsx)(b.zx,{onClick:function(){var u,f;return l==null||(u=(f=l.chain().focus()).toggleLink)===null||u===void 0?void 0:u.call(f,{href:""}).run()},isActive:s==null?void 0:s.isActive,disabled:s==null?void 0:s.disabled,children:(0,c.jsx)(Xe.c9z,{})})})})},gt=r(78498),Re=r(67761),_t=function(e){var t=e.text,i=e.href,n=e.onConfirm,o=e.onCancel,l=(0,d.useRef)(null),s=(0,d.useRef)(null),m=(0,d.useState)(t),u=T()(m,2),f=u[0],g=u[1],_=(0,d.useState)(i),L=T()(_,2),I=L[0],S=L[1],K=(0,d.useCallback)(function(){n==null||n({text:f||I,href:I})},[n,f,I]);return(0,d.useEffect)(function(){var j=setTimeout(function(){if(f){if(!I){var k;(k=s.current)===null||k===void 0||k.focus()}}else{var P;(P=l.current)===null||P===void 0||P.focus()}},200);return function(){clearTimeout(j)}},[]),(0,c.jsxs)("div",{className:"tide-editor-popup tide-link-popup",children:[(0,c.jsxs)("div",{className:"tide-link-popup__row",children:[(0,c.jsx)("label",{className:"tide-link-popup__label",children:"\u6587\u672C"}),(0,c.jsx)("input",{className:"tide-link-popup__input",ref:l,value:f,onChange:function(P){return g(P.target.value)}})]}),(0,c.jsxs)("div",{className:"tide-link-popup__row",children:[(0,c.jsx)("label",{className:"tide-link-popup__label",children:"\u94FE\u63A5"}),(0,c.jsx)("input",{className:"tide-link-popup__input",ref:s,value:I,onChange:function(P){return S(P.target.value)},onKeyDown:function(P){P.key==="Enter"&&I&&K()}})]}),(0,c.jsxs)("div",{className:"tide-link-popup__btn-group",children:[(0,c.jsx)("button",{className:"tide-link-popup__button tide-link-popup__button--basic",style:{marginLeft:8},onClick:o,children:"\u53D6\u6D88"}),(0,c.jsx)("button",{className:"tide-link-popup__button tide-link-popup__button--primary",onClick:K,disabled:!I,children:"\u786E\u5B9A"})]})]})},Et=function(e,t){var i=t||{},n=i.dom,o=i.defaultText,l=i.defaultHref,s=e.state,m=e.schema,u=s.selection,f=u.$from,g=u.from,_=u.to,L=u.empty,I=(0,D.TP)(m.marks.link,s.schema),S=(0,h.zh)(s,I.name),K=e.getAttributes(I),j,P;if(!S)j=g,P=_;else{var k;if(L){var G=(0,D.IH)(f,I,K);G&&(k={from:G.from,to:G.to})}else k={from:g,to:_};if(!k)return;j=k.from,P=k.to}var X="",re="";s.doc.nodesBetween(j,P,function(ie,ee,ue,N){var se,ye;if(ie.isInline){var ce=((se=(ye=ie.type.spec).toText)===null||se===void 0?void 0:se.call(ye,{node:ie,pos:ee,parent:ue,index:N}))||ie.textContent||"";X+=U()(ce).slice(Math.max(0,j-ee),Math.max(0,P-ee)).join("")}}),S?(X=X||s.doc.textBetween(j,P)||"",re=K.href):(X=X||s.doc.textBetween(j,P)||o||"",re=l||""),(0,Re.Zr)({editor:e,placement:"bottom-start",componentRender:function(ee){return new Re.M_(_t,{props:{text:X,href:re,onConfirm:function(N){var se;X===N.text?e.chain().setTextSelection({from:j,to:P}).setLink({href:N.href}).run():(e.chain().deleteRange({from:j,to:P}).insertContentAt(j,N.text,{updateSelection:!0}).run(),e.chain().command(function(ye){var ce=ye.tr,Le=Math.min(j,ce.selection.from),Me=ce.selection.to;return ce.setSelection(De.Bs.create(ce.doc,Le,Me)),!0}).setLink({href:N.href}).run()),(se=ee.instance)===null||se===void 0||se.hide(),e.commands.focus()},onCancel:function(){var N;(N=ee.instance)===null||N===void 0||N.hide(),e.commands.focus()}},editor:e})},tippyOptions:{getReferenceClientRect:function(){return n?n.getBoundingClientRect():(0,D.pr)(e.view,j,P)}}})},yt=/(?:^|\s)\[(.+?)]\((.+?)\)\s$/,xt=gt.rU.extend({inclusive:!1,name:"link",addOptions:function(){var e;return E()(E()({},(e=this.parent)===null||e===void 0?void 0:e.call(this)),{},{openOnClick:!1,linkOnPaste:!1,autolink:!0})},addAttributes:function(){return{href:{default:null,parseHTML:function(t){var i;return"".concat((i=t.getAttribute("href"))!==null&&i!==void 0?i:"")}},target:{default:this.options.HTMLAttributes.target},"data-id":{default:null,parseHTML:function(t){var i;return"".concat((i=t.getAttribute("data-id"))!==null&&i!==void 0?i:"")}}}},parseHTML:function(){return[{tag:'a[href]:not([href *= "javascript:" i]):not([data-type])'}]},addCommands:function(){var e,t=this;return E()(E()({},(e=this.parent)===null||e===void 0?void 0:e.call(this)),{},{toggleLink:function(n){return function(o){var l=o.chain,s=o.editor;return(0,h.zh)(s.state,t.name)?l().unsetLink().run():(Et(t.editor,{defaultHref:n.href}),!0)}}})},addKeyboardShortcuts:function(){var e=this;return{"Mod-k":function(){return e.editor.chain().toggleLink({href:""}).run()}}},addInputRules:function(){return[(0,D.Cf)({find:yt,type:this.type,getAttributes:function(t){var i=T()(t,3),n=i[2];return t.pop(),{href:n}}})]}}),Yt=function(e){var t=e.editor,i=useRef(null),n=useState(""),o=_slicedToArray(n,2),l=o[0],s=o[1],m=useState(""),u=_slicedToArray(m,2),f=u[0],g=u[1],_=useCallback(function(){var S=isActive(t.state,LinkExtension.name);if(S){var K=t.getAttributes(LinkExtension.name);s(K.href||""),g(K.target||"")}else s(""),g("");return S},[t]),L=useCallback(function(){t.chain().blur().focus().run(),showLinkEditPopup(t)},[t]),I=useCallback(function(){var S=t.view.state.selection.empty;if(S){var K=t.getAttributes(LinkExtension.name);t.chain().extendMarkRange(LinkExtension.name,K).unsetLink().run()}else t.chain().unsetLink().run()},[t]);return t.state.schema.marks.link?_jsx(SelectionBubbleMenu,{pluginKey:"linkBubbleMenu",editor:t,shouldShow:_,reference:"mark",referenceMarkType:LinkExtension.name,placement:"bottom-start",children:_jsxs("div",{ref:i,className:"tide-menu-bar tide-menu-bar-bubble",children:[_jsx("span",{className:"tide-menu-bar-bubble__link",children:_jsx("a",{href:l,target:f,rel:"noopener noreferrer nofollow",children:l})}),_jsx("button",{className:"tide-menu-bar__btn tide-menu-bar__item",onClick:L,children:_jsx(IconPenBold,{})}),_jsx("button",{className:"tide-menu-bar__btn tide-menu-bar__item",onClick:I,children:_jsx(IconChainSlashBold,{})})]})}):null},Ct=r(25298),bt=r.n(Ct),At=r(17069),Bt=r.n(At),jt=r(62657),ke=r.n(jt),kt=r(9504),Ue=r.n(kt),Tt=r(38836),Ke=r.n(Tt),Mt=r(21742),St=r.n(Mt),Dt=r(83136),Rt=r.n(Dt),Lt=r(82092),Te=r.n(Lt),Pt=["readOnlyEmptyView","readOnlyShowMenu","menuEnableUndoRedo","menuEnableFullscreen","fullscreen","onFullscreenChange","onReady","onChange"],Ft=function(p){St()(t,p);var e=Rt()(t);function t(i){var n;bt()(this,t);var o=i.readOnlyEmptyView,l=i.readOnlyShowMenu,s=l===void 0?!1:l,m=i.menuEnableUndoRedo,u=m===void 0?!0:m,f=i.menuEnableFullscreen,g=f===void 0?!0:f,_=i.fullscreen,L=_===void 0?!1:_,I=i.onFullscreenChange,S=i.onReady,K=i.onChange,j=te()(i,Pt);return n=e.call(this,E()(E()({extensions:[de.B,J.n,Be.x],editorProps:{attributes:{spellCheck:"false"}}},j),{},{onCreate:function(k){var G,X=k.editor,re=X.state,ie=X.view;if(re.plugins.length>0){var ee=[],ue=[];re.plugins.forEach(function(N){N.key.includes("Suggestion")?ue.push(N):ee.push(N)}),ie.updateState(re.reconfigure({plugins:[].concat(ue,ee)}))}(G=j.onCreate)===null||G===void 0||G.call(j,k),S==null||S(k.editor)},onUpdate:function(k){var G;(G=j.onUpdate)===null||G===void 0||G.call(j,k),K==null||K(k.editor.getJSON(),k.editor)}})),Te()(ke()(n),"readOnlyEmptyView",void 0),Te()(ke()(n),"readOnlyShowMenu",void 0),Te()(ke()(n),"menuEnableUndoRedo",void 0),Te()(ke()(n),"menuEnableFullscreen",void 0),Te()(ke()(n),"fullscreen",void 0),Te()(ke()(n),"onFullscreenChange",void 0),n.readOnlyEmptyView=o,n.readOnlyShowMenu=s,n.menuEnableUndoRedo=u,n.menuEnableFullscreen=g,n.fullscreen=L,n.onFullscreenChange=I,n}return Bt()(t,[{key:"setFullscreen",value:function(n){var o;this.fullscreen=n,(o=this.onFullscreenChange)===null||o===void 0||o.call(this,n,this),this.emit("update",{editor:this,transaction:this.state.tr}),n&&this.commands.focus(this.options.autofocus)}},{key:"setContent",value:function(n,o,l){return typeof n=="string"&&(n=Ze(n),n=Je(n),n=Ge(n)),this.commands.setContent(n,o,l)}},{key:"getMarkdown",value:function(){var n,o;return((n=this.storage.markdown)===null||n===void 0||(o=n.getMarkdown)===null||o===void 0?void 0:o.call(n))||""}},{key:"isReadOnly",get:function(){return!this.isEditable}},{key:"on",value:function(n,o){return Ue()(Ke()(t.prototype),"on",this).call(this,n,o)}},{key:"emit",value:function(n){for(var o,l=arguments.length,s=new Array(l>1?l-1:0),m=1;m<l;m++)s[m-1]=arguments[m];return(o=Ue()(Ke()(t.prototype),"emit",this)).call.apply(o,[this,n].concat(s))}},{key:"off",value:function(n,o){return Ue()(Ke()(t.prototype),"off",this).call(this,n,o)}}]),t}(Re.ML),Ot=r(82187),Ee=r.n(Ot),Ye=function(e){var t=e.editor,i=e.contentClassName,n=e.contentStyle,o=e.children,l=Ee()("tide-content",i);return t&&t.isEmpty&&t.isReadOnly?(0,c.jsx)("div",{className:l,style:n,children:t.readOnlyEmptyView||null}):(0,c.jsx)(Re.kg,{className:l,style:n,editor:t,children:o})};Ye.displayName="EditorContent";var Qe=(0,d.createContext)(null),qe=function(){var e=(0,d.useContext)(Qe);if(e===null)throw new Error("useEditorContext must be used within a EditorContextProvider");return e},It=function(e){var t=e.editor,i=e.children,n=(0,d.useState)(!!(t!=null&&t.isEditable)),o=T()(n,2),l=o[0],s=o[1],m=(0,d.useState)(!!(t!=null&&t.fullscreen)),u=T()(m,2),f=u[0],g=u[1],_=d.useMemo(function(){return{editable:l,fullscreen:f,setEditable:s,setFullscreen:g,editor:t}},[l,f,t]);return(0,d.useEffect)(function(){if(t){s(!!(t!=null&&t.isEditable)),g(!!(t!=null&&t.fullscreen));var L=function(S){s(S.editor.isEditable),g(S.editor.fullscreen)};return t==null||t.on("update",L),function(){t==null||t.off("update",L)}}},[t]),(0,c.jsx)(Qe.Provider,{value:_,children:i})},Ht=function(e){var t=e.style,i=e.className,n=e.children,o=qe(),l=o.fullscreen,s=Ee()("tide-editor",{"tide-editor--fullscreen":l},i);return(0,c.jsx)("div",{className:s,style:t,children:n})},Wt=function(e){var t=e.editor,i=e.className,n=e.style,o=e.children;return(0,c.jsx)(It,{editor:t,children:(0,c.jsx)(Ht,{style:n,className:i,children:o})})},et=(0,d.forwardRef)(function(p,e){var t=p.disabled,i=p.style,n=p.isActive,o=p.children,l=p.onClick;return(0,c.jsx)("button",{style:i,ref:e,onClick:l,disabled:t,className:Ee()("tide-menu-bar__btn",{"tide-menu-bar__btn--active":n,"tide-menu-bar__btn--disabled":t}),children:o})});et.displayName="TextButton";var tt=et,Nt=function(e){var t=e.className,i=e.style,n=e.title,o=(0,b.W6)(function(){return{isActive:function(){return(0,h.zh)(l.state,"ATail")},disabled:function(){return!l.state.schema.nodes.ATail||!l.can().toggleATail()}}}),l=o.editor,s=o.statusMap;return(0,c.jsx)(b.o1,{className:t,style:i,children:(0,c.jsx)(b.u,{text:"\u843D\u6B3E",children:(0,c.jsx)(tt,{onClick:function(){return l.chain().focus().toggleATail().run()},isActive:s==null?void 0:s.isActive,disabled:s==null?void 0:s.disabled,style:{width:48,justifyContent:"center",display:"flex",alignItems:"center"},children:"\u843D\u6B3E"})})})},Ut=r(35182),$e=["ATitle1","ATitle2","ATitle3",1,2,3],nt={ATitle1:"\u5927\u6807\u9898",ATitle2:"\u5C0F\u6807\u9898(\u7AE0)",ATitle3:"\u5B50\u6807\u9898(\u8282)"},Kt=function(){var e=(0,d.useState)(!1),t=T()(e,2),i=t[0],n=t[1],o=(0,b.W6)(function(){var u={paragraphIsActive:function(){return(0,h.zh)(l.state,"paragraph")},paragraphIsDisabled:function(){return!l.can().setParagraph()}};return $e.forEach(function(f){if(typeof f=="number")u["heading".concat(f,"IsActive")]=function(){return(0,h.zh)(l.state,"heading",{level:f})},u["heading".concat(f,"Disabled")]=function(){var _,L;return!l.state.schema.nodes.heading||!((_=(L=l.can()).toggleHeading)!==null&&_!==void 0&&_.call(L,{level:f}))};else{var g=f.split("").pop();u["".concat(f,"IsActive")]=function(){return(0,h.zh)(l.state,"ATitle",{level:Number(g)})},u["".concat(f,"Disabled")]=function(){var _,L;return!l.state.schema.nodes.heading||!((_=(L=l.can()).toggleATitle)!==null&&_!==void 0&&_.call(L,{level:Number(g)}))}}}),u}),l=o.editor,s=o.statusMap,m=function(){if(s!=null&&s.paragraphIsActive)return"\u6B63\u6587";var f=$e.find(function(g){return typeof g=="number"?s==null?void 0:s["heading".concat(g,"IsActive")]:s==null?void 0:s["".concat(g,"IsActive")]});return typeof f=="number"?"\u6807\u9898 ".concat(f):nt[f]||"\u6B63\u6587"};return(0,c.jsx)(b.o1,{children:(0,c.jsx)(Ut.ZP,{placement:"bottom-start",interactive:!0,onClickOutside:function(){return n(!1)},visible:i,content:(0,c.jsx)("div",{className:"tide-dropdown-menu",children:(0,c.jsxs)("div",{className:"tide-dropdown-menu__content",children:[(0,c.jsx)("div",{onClick:function(){if(s!=null&&s.paragraphIsDisabled||!l.can().chain().focus().setParagraph().run())return!1;l.chain().focus().setParagraph().run(),n(!1)},className:Ee()("tide-dropdown-menu__item",{"tide-dropdown-menu__item--active":s==null?void 0:s.paragraphIsActive,"tide-dropdown-menu__item--disabled":s==null?void 0:s.paragraphIsDisabled}),children:(0,c.jsxs)("div",{className:Ee()("tide-menu-head-row"),children:[(0,c.jsx)("span",{children:"\u6B63\u6587"}),(0,c.jsx)("span",{className:"tide-menu-head-row__span",children:"".concat(b.WD," + ").concat(b.Kw," + 0")})]})}),$e.map(function(u){return(0,c.jsx)("li",{onClick:function(){if(typeof u=="number"){if(s!=null&&s["heading".concat(u,"Disabled")]||!l.can().chain().focus().toggleHeading({level:u}).run())return!1}else{var g=u.split("").pop();if(s!=null&&s["".concat(u,"Disabled")]||!l.can().chain().focus().toggleATitle({level:Number(g)}).run())return!1}if(typeof u=="number")l.chain().focus().toggleHeading({level:u}).run();else{var _=u.split("").pop();l.chain().focus().toggleATitle({level:Number(_)}).run()}n(!1)},className:Ee()("tide-dropdown-menu__item",{"tide-dropdown-menu__item--active":s==null?void 0:s["heading".concat(u,"IsActive")],"tide-dropdown-menu__item--disabled":s==null?void 0:s["heading".concat(u,"Disabled")]}),children:(0,c.jsxs)("div",{className:Ee()("tide-menu-head-row"),children:[(0,c.jsx)("span",{className:"tide-menu-head-row__title--level".concat(u),children:nt[u]||"".concat(u,"\u7EA7\u6807\u9898")}),typeof u=="number"&&(0,c.jsx)("span",{className:"tide-menu-head-row__span",children:"".concat(b.WD," + ").concat(b.Kw," + ").concat(u)})]})},u)})]})}),children:(0,c.jsxs)("div",{className:"tide-dropdown-trigger",onClick:function(){return n(!i)},children:[(0,c.jsx)("span",{className:"tide-dropdown-trigger__head-text",children:m()}),(0,c.jsx)(Xe.KCe,{className:"tide-dropdown-trigger__head-icon"})]})})})},$t=function(e){var t=e.className,i=e.style,n=(0,b.W6)(function(){return{isActive:function(){return(0,h.zh)(o.state,"AWenHao")},disabled:function(){return!o.state.schema.nodes.AWenHao||!o.can().toggleWenHao()}}}),o=n.editor,l=n.statusMap;return(0,c.jsx)(b.o1,{className:t,children:(0,c.jsx)(b.u,{text:"\u6587\u53F7",children:(0,c.jsx)(tt,{onClick:function(){return o.chain().focus().toggleWenHao().run()},isActive:l==null?void 0:l.isActive,disabled:l==null?void 0:l.disabled,style:{width:48,justifyContent:"center",display:"flex",alignItems:"center"},children:"\u6587\u53F7"})})})},wt=function(e){var t=e.editor,i=e.disabledMenu,n=i===void 0?!1:i,o=e.menuClassName,l=e.menuStyle,s=e.onFullscreenChange,m=qe(),u=m.fullscreen,f=m.editable,g=(0,d.useMemo)(function(){if(!t)return null;var _=t.state.schema.nodes,L=_.AWenHao,I=_.ATail,S=_.ALink,K=_.ATitle,j=_.bulletList,P=_.orderedList,k=_.taskList,G=_.image,X=_.table,re=_.codeBlock,ie=_.blockquote,ee=_.horizontalRule,ue=_.emoji,N=t.state.schema.marks,se=N.bold,ye=N.italic,ce=N.strike,Le=N.link,Me=N.code;return[[t.menuEnableUndoRedo&&(0,c.jsx)(b.WP,{},"undo"),t.menuEnableUndoRedo&&(0,c.jsx)(b.Jw,{},"redo")],[K&&(0,c.jsx)(Kt,{},"ATitle"),I&&(0,c.jsx)(Nt,{},"ATail"),L&&(0,c.jsx)($t,{},"AWenhao"),se&&(0,c.jsx)(b.d8,{},"bold"),ye&&(0,c.jsx)(b.Tx,{},"italic"),ce&&(0,c.jsx)(b.Re,{},"strike"),Me&&(0,c.jsx)(b.EK,{},"code")],[j&&(0,c.jsx)(b.DY,{},"bulletList"),P&&(0,c.jsx)(b.GS,{},"orderedList"),k&&(0,c.jsx)(b.ax,{},"taskList")],[Le&&(0,c.jsx)(mt,{},"link"),G&&(0,c.jsx)(b.Ee,{},"image"),X&&(0,c.jsx)(b.iA,{},"table"),re&&(0,c.jsx)(b.dn,{},"codeBlock")],[ie&&(0,c.jsx)(b.V6,{},"blockquote"),ee&&(0,c.jsx)(b.bo,{},"horizontalRule"),ue&&(0,c.jsx)(b.dy,{},"emoji")],[t.menuEnableFullscreen&&(0,c.jsx)(b.iT,{fullscreen:u,onFullscreenChange:function(Ce){t.setFullscreen(Ce),s(Ce)}},"fullscreen")]].map(function(xe){return xe.filter(Boolean)}).filter(function(xe){return xe.length>0}).map(function(xe,Ce,pe){return(0,c.jsxs)(d.Fragment,{children:[xe,Ce<pe.length-1&&(0,c.jsx)(b.uy,{})]},Ce)})},[t,f,u,t==null?void 0:t.menuEnableUndoRedo,t==null?void 0:t.menuEnableFullscreen]);return!f&&!(t!=null&&t.readOnlyShowMenu)?null:(0,c.jsx)(b.j_,{className:Ee()(o,{disabled:(t==null?void 0:t.readOnlyShowMenu)||n}),style:l,children:g})},at=function(e){var t=e.editor,i=e.className,n=e.style,o=e.menuClassName,l=e.menuStyle,s=e.contentClassName,m=e.contentStyle,u=e.onFullscreenChange;return t?(0,c.jsx)(Wt,{editor:t,style:n,className:i,children:(0,c.jsxs)(b.lv,{editor:t,children:[(0,c.jsx)(wt,{editor:t,menuStyle:l,menuClassName:o,onFullscreenChange:function(g){return u==null?void 0:u(g)}}),(0,c.jsxs)(Ye,{editor:t,contentStyle:m,contentClassName:s,children:[(0,c.jsx)(W.dC,{editor:t}),(0,c.jsx)(q.d6,{editor:t}),(0,c.jsx)(F.El,{editor:t}),(0,c.jsx)(b.OA,{editor:t})]})]})}):null};at.displayName="EditorRender";var zt=function(e,t){return(0,Re.jE)(Ft,e,t)},Vt=["starterKitOpt","parseOptions","editorProps","mode","onChange","debug","height","value","style","onReady","simple","renderMode","simpleConfigure"],Jt=function(){var p=ve()($()().mark(function e(t,i){var n,o;return $()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n="",o=new FileReader,o.onload=function(){n=o.result},o.readAsDataURL(t),console.log("file",t),s.abrupt("return",new Promise(function(m){var u=1,f=setInterval(function(){u++,i(u*10),u>=10&&(clearInterval(f),m(n))},300)}));case 6:case"end":return s.stop()}},e)}));return function(t,i){return p.apply(this,arguments)}}(),Zt=function(e){var t=e.starterKitOpt,i=e.parseOptions,n=e.editorProps,o=e.mode,l=o===void 0?"json":o,s=e.onChange,m=e.debug,u=e.height,f=u===void 0?500:u,g=e.value,_=e.style,L=e.onReady,I=e.simple,S=I===void 0?!1:I,K=e.renderMode,j=K===void 0?S?"normal":"gov":K,P=e.simpleConfigure,k=te()(e,Vt),G=d.useState(!1),X=T()(G,2),re=X[0],ie=X[1],ee=d.useState(),ue=T()(ee,2),N=ue[0],se=ue[1],ye=d.useState(f),ce=T()(ye,2),Le=ce[0],Me=ce[1];(0,d.useEffect)(function(){Me(f)},[f]);var xe={heading:!1,table:!1,image:!1,bulletList:!1,orderedList:!1,blockquote:!1,codeBlock:!1,horizontalRule:!1},Ce=S?E()(E()({},xe),P):{},pe=zt({extensions:[].concat(U()(S?[]:[z,a,C]),[xt,vt.configure(E()(E()({link:!1,uploader:{image:{uploader:k.imageUploader||Jt}}},S?Ce:{}),t))]),onChange:function(We,we){var Pe;l==="json"?Pe=We:l==="md"?Pe=we.getMarkdown():Pe=we.getHTML(),se(Pe),s==null||s(Pe,we)},editorProps:n,editable:k.editable,parseOptions:i||{},onReady:function(We){m&&console.log("editor onReady",We),L==null||L(We),ie(!0)}});return(0,d.useEffect)(function(){pe&&(pe.setEditable(!!k.editable),k.editable&&pe.isEmpty&&pe.commands.setContent("<p></p>"),k.editable&&pe.commands.focus("end"))},[k.editable]),(0,d.useEffect)(function(){re&&N!==g&&(m&&console.log("editor setContent",g),se(g),pe==null||pe.setContent(g||""))},[g,re]),(0,c.jsx)("div",{className:"atiptap_main_".concat(j," atiptap_bordered_").concat(k.editable,"_").concat(k.bordered," ").concat(S?"atiptap_simple":""),children:(0,c.jsx)(at,E()({editor:pe,style:E()({height:Le},_),onFullscreenChange:function(){Me("100%")}},k))})},Gt=Zt},16757:function(Se,Y,r){r.d(Y,{ZP:function(){return V},AM:function(){return fe}});var oe=r(16636),U=r(85378),he=r(80398),E=r(99099),x=null,T=null,fe=function(F,M){return T?(T.setJson(F),T.setConfig(M)):T=new E.ZP(F,M),T.render()},te=function(F){if(!F)return[];for(var M=1,Z=F.content,W=[],le=Z.reduce(function(Ae,de){return de.type==="ATitle"||de.type==="heading"?Math.max(Ae,de.attrs.level):Ae},0),Q=0;Q<Z.length;Q++){var _e=M++,ge=Z[Q];if(ge.type==="ATitle"||ge.type==="heading"){var q={title:ge.content[0].text,label:ge.content[0].text,key:"".concat(_e),value:"".concat(_e),isLeaf:!0,children:[],pcode:"-1"};if(le===1){if(ge.attrs.level===1)W.push(q);else if(ge.attrs.level===2&&W.length>0){var be=W[W.length-1];q.pcode=be.value,q.isLeaf=!1,be.children.push(q)}}else W.push(q)}}return W},ne=r(25298),$=r.n(ne),ae=r(17069),ve=r.n(ae),d=r(82092),w=r.n(d),me=function(){function O(){$()(this,O),w()(this,"renderInstances",new Map)}return ve()(O,[{key:"getRenderInstance",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"main",Z=arguments.length>1?arguments[1]:void 0,W=arguments.length>2?arguments[2]:void 0;if(this.renderInstances.has(M)){var Q=this.renderInstances.get(M);Q.setJson(Z),Q.setConfig(W)}else{var le=new E.ZP(Z,W);this.renderInstances.set(M,le)}return this.renderInstances.get(M)}},{key:"removeRenderInstance",value:function(M){this.renderInstances.has(M)&&this.renderInstances.delete(M)}}],[{key:"getInstance",value:function(){return O.instance||(O.instance=new O),O.instance}}]),O}();w()(me,"instance",void 0);var D=null,z=r(26068),C=r.n(z),a=r(67825),h=r.n(a),v=r(50959),B=r(11527),A=["onChange"],y=function(F){var M=F.onChange,Z=h()(F,A),W=function(Q,_e){M==null||M(Q,_e)};return(0,B.jsx)(oe.Z,C()(C()({},Z),{},{onChange:W}))},H=y,V=H},99099:function(Se,Y,r){var oe=r(15558),U=r.n(oe),he=r(26068),E=r.n(he),x=r(25298),T=r.n(x),fe=r(17069),te=r.n(fe),ne=r(82092),$=r.n(ne),ae=r(71494),ve=r(50959),d=r(11527);function w(z){if(!z)return{};var C={};if(z.indexOf("?")!==-1)for(var a=z.split("?")[1],h=a.split("&"),v=0;v<h.length;v++)C[h[v].split("=")[0]]=decodeURI(h[v].split("=")[1]);return C}function me(z){return z.reduce(function(C,a){return C+a},0)}var D=function(){function z(C,a){T()(this,z),$()(this,"config",void 0),$()(this,"json",void 0),$()(this,"isAfterHardBreak",!1),this.config=a||{renderMode:"custom"},this.json=C}return te()(z,[{key:"renderLink",value:function(a,h,v){var B,A=this,y={};if(a.type==="link"){var H;y=w((H=a.attrs)===null||H===void 0?void 0:H.href)}var V=a.type==="link"?(0,d.jsx)("a",{title:"\u94FE\u63A5",href:(B=a.attrs)===null||B===void 0?void 0:B.href,onClick:function(){var F,M;(F=(M=A.config).onLinkClick)===null||F===void 0||F.call(M,y)},className:"",target:a.attrs.target,children:this.applyMarks({marks:h,text:v})},a.key):null;return this.config.linkRender?this.config.linkRender(V,a,y):V}},{key:"applyMarks",value:function(a){var h,v,B=a.marks,A=a.text;if(!B||B.length===0)return((h=(v=this.config).textRender)===null||h===void 0?void 0:h.call(v,A))||A;var y=B[0],H=B.slice(1);switch(y.type){case"link":return this.renderLink(y,H,A);case"bold":return this.renderBold(y.key,H,A);case"italic":return this.renderItalic(y.key,H,A);default:return this.applyMarks({marks:H,text:A})}}},{key:"renderBold",value:function(a,h,v){return(0,d.jsx)("strong",{children:this.applyMarks({marks:h,text:v})},a)}},{key:"renderItalic",value:function(a,h,v){return(0,d.jsx)("em",{children:this.applyMarks({marks:h,text:v})},a)}},{key:"renderText",value:function(a,h){return(0,d.jsx)("span",{style:h,children:this.applyMarks({marks:a.marks,text:a.text})},a.key)}},{key:"renderHeading",value:function(a){switch(a.attrs.level){case 1:return(0,d.jsx)("h1",{id:a.key,style:{textAlign:a.attrs.textAlign},children:this.renderContent(a.content)},a.key);case 2:return(0,d.jsx)("h2",{id:a.key,style:{textAlign:a.attrs.textAlign},children:this.renderContent(a.content)},a.key);case 3:return(0,d.jsx)("h3",{id:a.key,style:{textAlign:a.attrs.textAlign},children:this.renderContent(a.content)},a.key);case 4:return(0,d.jsx)("h4",{id:a.key,style:{textAlign:a.attrs.textAlign},children:this.renderContent(a.content)},a.key);case 5:return(0,d.jsx)("h5",{id:a.key,style:{textAlign:a.attrs.textAlign},children:this.renderContent(a.content)},a.key);case 6:return(0,d.jsx)("h6",{id:a.key,style:{textAlign:a.attrs.textAlign},children:this.renderContent(a.content)},a.key);default:return(0,d.jsx)("h1",{id:a.key,style:{textAlign:a.attrs.textAlign},children:this.renderContent(a.content)},a.key)}}},{key:"renderHardBreak",value:function(a){return this.isAfterHardBreak=!0,(0,d.jsx)("br",{},a.key)}},{key:"renderATitle",value:function(a){return(0,d.jsx)("div",{id:a.key,className:"a-tiptap-title".concat(a.attrs.level),children:this.renderContent(a.content)},a.key)}},{key:"renderATail",value:function(a){return(0,d.jsx)("div",{className:"a-tiptap-tail",children:this.renderContent(a.content)},a.key)}},{key:"renderAWenHao",value:function(a){return(0,d.jsx)("div",{className:"a-tiptap-wenhao",children:this.renderContent(a.content)},a.key)}},{key:"renderParagraph",value:function(a){return(0,d.jsx)("p",{children:(0,d.jsx)("br",{className:"ProseMirror-trailingBreak"})},a.key)}},{key:"renderHorizontalRule",value:function(a){return(0,d.jsx)("hr",{contentEditable:"false"},a.key)}},{key:"renderCodeBlock",value:function(a){var h,v;console.log("item",a);var B=a==null||(h=a.attrs)===null||h===void 0?void 0:h.language;return(0,d.jsx)("div",{className:"react-renderer node-codeBlock",children:(0,d.jsx)("div",{className:"tide-code-block",style:{whiteSpace:"normal"},children:(0,d.jsx)("div",{className:"tide-code-block__content",children:(0,d.jsx)("pre",{className:"hljs",children:(0,d.jsx)("code",{style:{whiteSpace:"pre-wrap"},children:(0,d.jsx)("div",{style:{whiteSpace:"initial",textIndent:0,fontSize:14},children:(v=a.content)===null||v===void 0?void 0:v.map(function(A){var y=A.text;return B&&(y=ae.Z.highlight(A.text,{language:B}).value),(0,d.jsx)("span",{style:{whiteSpace:"pre-wrap"},dangerouslySetInnerHTML:{__html:y}},A.key)})})})})})})},a.key)}},{key:"renderRow",value:function(a,h){return(0,d.jsx)("tr",{children:a.content.map(function(v,B){var A,y;if(!((A=v.attrs)!==null&&A!==void 0&&A.colwidth))return null;var H=me(v.attrs.colwidth),V={width:"".concat(H,"px")};v.attrs.colspan>1&&(V.colSpan=v.attrs.colspan),v.attrs.rowspan>1&&(V.rowSpan=v.attrs.rowspan);var O=v.content[0].attrs;return delete O.indent,console.log("pattrs",O),(0,d.jsx)("td",E()(E()({},V),{},{style:{width:V.width},children:(0,d.jsx)("p",{style:E()({},O),children:(y=v.content)===null||y===void 0||(y=y[0])===null||y===void 0||(y=y.content)===null||y===void 0||(y=y[0])===null||y===void 0?void 0:y.text})}),B)})},a.key||h)}},{key:"renderTable",value:function(a){var h=this,v=[];a.content[0].content.forEach(function(A){var y;(y=A.attrs)!==null&&y!==void 0&&y.colwidth&&v.push.apply(v,U()(A.attrs.colwidth))});var B=me(v);return(0,d.jsx)("div",{className:"tableWrapper",children:(0,d.jsx)("div",{className:"scrollWrapper",children:(0,d.jsx)("table",{style:{width:"".concat(B,"px"),tableLayout:"auto"},children:(0,d.jsx)("tbody",{children:a.content.map(function(A,y){return h.renderRow(A,y)})})})})},a.key)}},{key:"renderImage",value:function(a){var h="tide-image tide-image__align-".concat(a.attrs.align);return(0,d.jsx)("div",{className:"react-renderer node-image",contentEditable:!1,children:(0,d.jsx)("div",{"data-drag-handle":"true",className:h,style:{whiteSpace:"normal"},children:(0,d.jsx)("div",{className:"tide-image__view",children:(0,d.jsx)("img",{src:a.attrs.src,alt:"",style:{width:a.attrs.width,height:a.attrs.height}})})})},a.key)}},{key:"renderDefault",value:function(a,h){return(0,d.jsx)("p",{children:this.renderContent(a.content)},a.key||a.type+h)}},{key:"renderContent",value:function(a){var h=this;return a==null?void 0:a.map(function(v,B){if(v.key||(v.key=v.type+B),v.type==="text"){var A=h.isAfterHardBreak?{paddingLeft:"2em"}:{};return h.isAfterHardBreak=!1,h.renderText(v,A)}return v.type==="hardBreak"?(h.isAfterHardBreak=!0,(0,d.jsx)("br",{},v.key)):(0,d.jsx)("span",{children:v.text},v.key)})}},{key:"renderType",value:function(a,h){return a.type==="hardBreak"?this.renderHardBreak(a):a.type==="ATitle"?this.renderATitle(a):a.type==="ATail"?this.renderATail(a):a.type==="AWenHao"?this.renderAWenHao(a):a.type==="paragraph"&&!a.content?this.renderParagraph(a):a.type==="horizontalRule"?this.renderHorizontalRule(a):a.type==="codeBlock"?this.renderCodeBlock(a):a.type==="heading"?this.renderHeading(a):a.type==="table"?this.renderTable(a):a.type==="image"?this.renderImage(a):this.renderDefault(a,h)}},{key:"render",value:function(a,h){var v=this;return a&&(this.json=a),h&&(this.config=h),this.json?this.json.content?(this.json.content.forEach(function(B,A){B.key||(B.key=B.type+A)}),(0,d.jsx)("div",{className:"atiptap_main_".concat(this.config.renderMode),children:(0,d.jsx)("div",{className:"tide-content",children:(0,d.jsx)("div",{className:"tiptap ProseMirror",children:this.json.content.map(function(B,A){return v.renderType(B,A)})})})})):(0,d.jsx)(d.Fragment,{}):(0,d.jsx)(d.Fragment,{})}},{key:"setConfig",value:function(a){a&&(this.config=a)}},{key:"setJson",value:function(a){this.json=a}}]),z}();Y.ZP=D}}]);
