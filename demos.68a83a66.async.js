"use strict";(self.webpackChunk_allahbin_tiptap=self.webpackChunk_allahbin_tiptap||[]).push([[433],{25710:function(be,ee,o){o.r(ee);var de=o(48305),C=o.n(de),ue=o(1794),R=o(50959),L=o(11527),Z={margin:"0 10px",padding:"5px 10px",border:"1px solid #ccc",borderRadius:"5px",cursor:"pointer"};ee.default=function(){var ce=(0,R.useState)(),te=C()(ce,2),pe=te[0],G=te[1],k=(0,R.useState)("html"),v=C()(k,2),ne=v[0],E=v[1],re=(0,R.useState)(),N=C()(re,2),y=N[0],a=N[1],m=(0,R.useState)(),g=C()(m,2),A=g[0],B=g[1],F=(0,R.useState)(),I=C()(F,2),X=I[0],he=I[1],$=R.useRef(),Y=function(M,Ee){console.log("onChange",M,Ee),G(M),ve()},fe=function(M){he(M),G(M)},ae=function(M){a(M),G(M)},q=function(M){if(!M.includes("{")){B("");return}try{B(M);var Ee=JSON.parse(M);G(Ee)}catch(De){console.log("\u65E0\u6548json")}},ve=function(){he($.current.getHTML()),a($.current.getMarkdown()),B(JSON.stringify($.current.getJSON()))};return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("h2",{children:["\u8FD0\u884C\u7684\u6A21\u5F0F\uFF1A",ne]}),(0,L.jsx)(ue.ZP,{onReady:function(M){window.editor=M,$.current=M},mode:ne,value:pe,onChange:Y}),(0,L.jsxs)("div",{style:{marginTop:12},children:[(0,L.jsx)("button",{style:Z,onClick:function(){E("html"),fe("<p>123</p>")},children:"\u8D4B\u503Chtml"}),(0,L.jsx)("button",{style:Z,onClick:function(){E("md"),ae("! \u4F60\u597D")},children:"\u8D4B\u503Cmd"}),(0,L.jsx)("button",{style:Z,onClick:function(){E("json"),q('{"type":"doc","content":[{"type":"paragraph","attrs":{"textAlign":"left","indent":0},"content":[{"type":"text","text":"\u963F\u8428\u8FBE\u963F\u8428\u5927\u5927\u548B\u6253\u6253\u7B97111"},{"type":"text","marks":[{"type":"link","attrs":{"href":"\u963F\u8428\u5927\u5927","target":"_blank","data-id":123131321}}],"text":"\u963F\u8428\u5927\u5927"}]}]}')},children:"\u8D4B\u503Cjson"}),(0,L.jsx)("button",{style:Z,id:"parseContentToInputBox",onClick:ve,children:"\u89E3\u6790\u6570\u636E\u5230\u8F93\u5165\u6846"})]}),(0,L.jsx)("h3",{children:"jsonValue"}),(0,L.jsx)("textarea",{id:"jsonValue",value:A,onChange:function(M){return q(M.target.value)},style:{width:"100%"},rows:4}),(0,L.jsx)("h3",{children:"htmlValue"}),(0,L.jsx)("textarea",{id:"htmlValue",value:X,onChange:function(M){return fe(M.target.value)},style:{width:"100%"},rows:4}),(0,L.jsx)("h3",{children:"mdValue"}),(0,L.jsx)("textarea",{id:"mdValue",value:y,onChange:function(M){return ae(M.target.value)},style:{width:"100%"},rows:4})]})}},22261:function(be,ee,o){o.r(ee);var de=o(48305),C=o.n(de),ue=o(25298),R=o.n(ue),L=o(17069),Z=o.n(L),ce=o(21742),te=o.n(ce),pe=o(83136),G=o.n(pe),k=o(1794),v=o(99099),ne=o(50959),E=o(11527),re={marginTop:"10px",padding:"5px 10px",border:"1px solid #ccc",borderRadius:"5px"},N=function(m){te()(A,m);var g=G()(A);function A(){return R()(this,A),g.apply(this,arguments)}return Z()(A,[{key:"renderLink",value:function(F,I,X){return(0,E.jsx)("h1",{rel:"noopener noreferrer nofollow",style:{color:"#000"},children:X})}}]),A}(v.ZP),y=new N,a='<table style="width: 529px"><colgroup><col style="100px"><col style="429px"></colgroup><tbody><tr><td colspan="2" rowspan="1" colwidth="100,429"><p>11</p></td></tr><tr><td colspan="1" rowspan="1" colwidth="100"><p style="text-align: center">2</p></td><td colspan="1" rowspan="1" colwidth="429"><p>3</p></td></tr></tbody></table><table style="width: 200px"><colgroup><col style="100px"><col style="100px"></colgroup><tbody><tr><td colspan="2" rowspan="1" colwidth="100,100"><p>11</p></td></tr><tr><td colspan="1" rowspan="1" colwidth="100"><p>1</p></td><td colspan="1" rowspan="1" colwidth="100"><p>1</p></td></tr></tbody></table><table style="width: 432px"><colgroup><col style="178px"><col style="254px"></colgroup><tbody><tr><td colspan="1" rowspan="1" colwidth="178"><p>\u554A</p></td><td colspan="1" rowspan="1" colwidth="254"><p>11</p></td></tr><tr><td colspan="1" rowspan="1" colwidth="178"><p>212312</p></td><td colspan="1" rowspan="1" colwidth="254"><p>\u8BD5\u8BD5</p></td></tr></tbody></table><p>\u7B2C\u4E94\u5341\u6761 <a target="_blank" rel="noopener noreferrer nofollow" href="%EF%BC%82%2Fsearch?channelid=3&amp;searchword=bbrq=%281998%2E09%2E01%20to%202009%2E05%2E01%29%20and%20%E6%AD%A3%E6%96%87=%28%27%E4%B8%AD%E5%8D%8E%E4%BA%BA%E6%B0%91%E5%85%B1%E5%92%8C%E5%9B%BD%E6%B6%88%E9%98%B2%E6%B3%95%27%20pre%2F16%20%E7%AC%AC%E4%BA%94%E5%8D%81%E6%9D%A1%2B%27%E6%B6%88%E9%98%B2%E6%B3%95%27%20pre%2F16%20%E7%AC%AC%E4%BA%94%E5%8D%81%E6%9D%A1%2B%27%E4%B8%AD%E5%8D%8E%E4%BA%BA%E6%B0%91%E5%85%B1%E5%92%8C%E5%9B%BD%E6%B6%88%E9%98%B2%E6%B3%95%EF%BC%88%EF%BC%92%EF%BC%90%EF%BC%90%EF%BC%98%E5%B9%B4%EF%BC%89%27%20pre%2F16%20%E7%AC%AC%E4%BA%94%E5%8D%81%E6%9D%A1%2B%27%E4%B8%AD%E5%8D%8E%E4%BA%BA%E6%B0%91%E5%85%B1%E5%92%8C%E5%9B%BD%E6%B6%88%E9%98%B2%E6%B3%95%EF%BC%88%EF%BC%92%EF%BC%90%EF%BC%91%EF%BC%99%E5%B9%B4%EF%BC%89%27%20pre%2F16%20%E7%AC%AC%E4%BA%94%E5%8D%81%E6%9D%A1%2B%27%E4%B8%AD%E5%8D%8E%E4%BA%BA%E6%B0%91%E5%85%B1%E5%92%8C%E5%9B%BD%E6%B6%88%E9%98%B2%E6%B3%95%EF%BC%88%EF%BC%92%EF%BC%90%EF%BC%92%EF%BC%91%E5%B9%B4%EF%BC%89%27%20pre%2F16%20%E7%AC%AC%E4%BA%94%E5%8D%81%E6%9D%A1%29%20not%20%E6%B3%95%E8%A7%84%E5%88%86%E7%B1%BB%E5%8F%B7=111601199801%EF%BC%82" data-id="">(8) </a>\u706B\u707E\u6251\u706D\u540E\uFF0C\u4E3A\u9690\u7792\u3001\u63A9\u9970\u8D77\u706B\u539F\u56E0\u3001\u63A8\u5378\u8D23\u4EFB\uFF0C\u6545\u610F\u7834\u574F\u73B0\u573A\u6216\u8005\u4F2A\u9020\u73B0\u573A\uFF0C\u5C1A\u4E0D\u6784\u6210\u72AF\u7F6A\u7684\uFF0C\u5904\u8B66\u544A\u3001\u7F5A\u6B3E\u6216\u8005\u5341\u4E94\u65E5\u4EE5\u4E0B\u62D8\u7559\u3002<br>\u5355\u4F4D\u6709\u524D\u6B3E\u884C\u4E3A\u7684\uFF0C\u5904\u8B66\u544A\u6216\u8005\u7F5A\u6B3E\uFF0C\u5E76\u5BF9\u5176\u76F4\u63A5\u8D1F\u8D23\u7684\u4E3B\u7BA1\u4EBA\u5458\u548C\u5176\u4ED6\u76F4\u63A5\u8D23\u4EFB\u4EBA\u5458\u4F9D\u7167\u524D\u6B3E\u7684\u89C4\u5B9A\u5904\u7F5A\u3002</p><p>\u7B2C\u4E94\u5341\u4E00\u6761 <a target="_blank" rel="noopener noreferrer nofollow" href="%EF%BC%82%2Fdetail?record=1&amp;channelid=3&amp;presearchword=bbrq=%281998%2E09%2E01%20to%202009%2E05%2E01%29%20and%20%E6%AD%A3%E6%96%87=%28%27%E4%B8%AD%E5%8D%8E%E4%BA%BA%E6%B0%91%E5%85%B1%E5%92%8C%E5%9B%BD%E6%B6%88%E9%98%B2%E6%B3%95%27%20pre%2F16%20%E7%AC%AC%E4%BA%94%E5%8D%81%E4%B8%80%E6%9D%A1%2B%27%E6%B6%88%E9%98%B2%E6%B3%95%27%20pre%2F16%20%E7%AC%AC%E4%BA%94%E5%8D%81%E4%B8%80%E6%9D%A1%2B%27%E4%B8%AD%E5%8D%8E%E4%BA%BA%E6%B0%91%E5%85%B1%E5%92%8C%E5%9B%BD%E6%B6%88%E9%98%B2%E6%B3%95%EF%BC%88%EF%BC%92%EF%BC%90%EF%BC%90%EF%BC%98%E5%B9%B4%EF%BC%89%27%20pre%2F16%20%E7%AC%AC%E4%BA%94%E5%8D%81%E4%B8%80%E6%9D%A1%2B%27%E4%B8%AD%E5%8D%8E%E4%BA%BA%E6%B0%91%E5%85%B1%E5%92%8C%E5%9B%BD%E6%B6%88%E9%98%B2%E6%B3%95%EF%BC%88%EF%BC%92%EF%BC%90%EF%BC%91%EF%BC%99%E5%B9%B4%EF%BC%89%27%20pre%2F16%20%E7%AC%AC%E4%BA%94%E5%8D%81%E4%B8%80%E6%9D%A1%2B%27%E4%B8%AD%E5%8D%8E%E4%BA%BA%E6%B0%91%E5%85%B1%E5%92%8C%E5%9B%BD%E6%B6%88%E9%98%B2%E6%B3%95%EF%BC%88%EF%BC%92%EF%BC%90%EF%BC%92%EF%BC%91%E5%B9%B4%EF%BC%89%27%20pre%2F16%20%E7%AC%AC%E4%BA%94%E5%8D%81%E4%B8%80%E6%9D%A1%29%20not%20%E6%B3%95%E8%A7%84%E5%88%86%E7%B1%BB%E5%8F%B7=111601199801#law_firsthit%EF%BC%82" data-id="">(1) </a>\u5BF9\u8FDD\u53CD\u672C\u6CD5\u89C4\u5B9A\u884C\u4E3A\u7684\u5904\u7F5A\uFF0C\u7531\u516C\u5B89\u6D88\u9632\u673A\u6784\u88C1\u51B3\u3002\u5BF9\u7ED9\u4E88\u62D8\u7559\u7684\u5904\u7F5A\uFF0C\u7531\u516C\u5B89\u673A\u5173\u4F9D\u7167 <a target="_blank" rel="noopener noreferrer nofollow" href="%EF%BC%82%2Fgolaw?dbnm=gjfg&amp;flid=111605199401%EF%BC%82" data-id="">\u6CBB\u5B89\u7BA1\u7406\u5904\u7F5A\u6761\u4F8B </a>\u7684\u89C4\u5B9A\u88C1\u51B3\u3002<br>\u8D23\u4EE4\u505C\u4EA7\u505C\u4E1A\uFF0C\u5BF9\u7ECF\u6D4E\u548C\u793E\u4F1A\u751F\u6D3B\u5F71\u54CD\u8F83\u5927\u7684\uFF0C\u7531\u516C\u5B89\u6D88\u9632\u673A\u6784\u62A5\u8BF7\u5F53\u5730\u4EBA\u6C11\u653F\u5E9C\u4F9D\u6CD5\u51B3\u5B9A\uFF0C\u7531\u516C\u5B89\u6D88\u9632\u673A\u6784\u6267\u884C\u3002</p>';ee.default=function(){var m=(0,ne.useState)(""),g=C()(m,2),A=g[0],B=g[1],F=(0,ne.useState)(),I=C()(F,2),X=I[0],he=I[1],$=ne.useRef(),Y=function(q,ve){console.log("onChange",q,ve),B(q),fe()},fe=function(){setTimeout(function(){he($.current.getJSON())},200)};return console.log("jsonValue",X),(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(k.ZP,{onReady:function(q){window.editor=q,$.current=q},mode:"json",value:A,onChange:Y}),(0,E.jsx)("button",{style:{marginTop:10},onClick:function(){return Y(a,$)},children:"\u6E32\u67D3\u5230div\u4E2D"}),(0,E.jsx)("div",{style:re,children:(0,k.AM)(X)}),(0,E.jsx)("h4",{children:"\u81EA\u5B9A\u4E49\u6E32\u67D3\u51FD\u6570"}),(0,E.jsx)("div",{style:re,children:y.render(X)})]})}},1794:function(be,ee,o){o.d(ee,{ZP:function(){return Yt},AM:function(){return Vt}});var de=o(26068),C=o.n(de),ue=o(48305),R=o.n(ue),L=o(67825),Z=o.n(L),ce=o(90228),te=o.n(ce),pe=o(87999),G=o.n(pe),k=o(50959),v=o(85378),ne=o(80398),E=o(52063),re=E.NB.create({name:"ATail",addOptions:function(){return{HTMLAttributes:{class:"a-tiptap-tail"}}},content:"inline*",group:"block",defining:!0,parseHTML:function(){return[{tag:"div.a-tiptap-tail",getAttrs:function(t){return{class:"a-tiptap-tail"}}}]},renderHTML:function(e){var t=e.node,r=e.HTMLAttributes,n=C()(C()({},r),{},{class:"a-tiptap-tail"});return["div",n,0]},addCommands:function(){var e=this;return{setATail:function(){return function(r){var n=r.commands;return n.setNode(e.name,{})}},toggleATail:function(){return function(r){var n=r.commands;return n.toggleNode(e.name,"paragraph",{})}}}},addInputRules:function(){return[(0,E.zK)({find:/^!-\s$/,type:this.type,getAttributes:function(){return{class:"a-tiptap-tail"}}})]}}),N=E.NB.create({name:"ATitle",addOptions:function(){return{levels:[1,2,3],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes:function(){return{level:{default:1,rendered:!1}}},parseHTML:function(){return console.log("parseHTML"),this.options.levels.map(function(e){return{tag:"div.a-tiptap-title".concat(e),attrs:{level:e,class:"a-tiptap-title".concat(e)}}})},renderHTML:function(e){var t=e.node,r=e.HTMLAttributes;console.log("renderHTML");var n=this.options.levels.includes(t.attrs.level),s=n?t.attrs.level:this.options.levels[0];return["div",(0,E.P1)(this.options.HTMLAttributes,r,{class:"a-tiptap-title".concat(s)}),0]},addCommands:function(){var e=this;return{setATitle:function(r){return function(n){var s=n.commands;return console.log("setHeading"),e.options.levels.includes(r.level)?s.setNode(e.name,r):!1}},toggleATitle:function(r){return function(n){var s=n.commands;return e.options.levels.includes(r.level)?s.toggleNode(e.name,"paragraph",r):!1}}}},addInputRules:function(){var e=this;return this.options.levels.map(function(t){return(0,E.zK)({find:new RegExp("^(!{1,".concat(t,"})\\s$")),type:e.type,getAttributes:{level:t,class:"a-tiptap-title".concat(t)}})})}}),y=E.NB.create({name:"AWenHao",addOptions:function(){return{HTMLAttributes:{class:"a-tiptap-wenhao"}}},content:"inline*",group:"block",defining:!0,parseHTML:function(){return[{tag:"div.a-tiptap-wenhao",getAttrs:function(t){return{class:"a-tiptap-wenhao"}}}]},renderHTML:function(e){var t=e.node,r=e.HTMLAttributes;console.log("renderHTML");var n=C()(C()({},r),{},{class:"a-tiptap-wenhao"});return["div",n,0]},addCommands:function(){var e=this;return{setWenHao:function(){return function(r){var n=r.commands;return n.setNode(e.name,{})}},toggleWenHao:function(){return function(r){var n=r.commands;return n.toggleNode(e.name,"paragraph",{})}}}},addInputRules:function(){return[(0,E.zK)({find:/^!~\s$/,type:this.type,getAttributes:function(){return{class:"a-tiptap-wenhao"}}})]}}),a=o(68923),m=o(14842),g=o(63063),A=o(96063),B=o(51823),F=o(83608),I=o(86520),X=o(37176),he=o(13067),$=o(83356),Y=o(62023),fe=o(36009),ae=o(25514),q=o(22623),ve=o(6734),V=o(99288),M=o(35260),Ee=o(68457),De=o(67737),Je=o(83113),Ze=o(62308),Ge=o(76753),Xe=o(86674),Ye=o(97517),Qe=o(67223),qe=o(74972),Se=o(5283),et=o(71392),tt=o(15558),Be=o.n(tt),nt=o(83994),ye=o(3317),at=E.hj.create({name:"markdownClipboardCopy",addProseMirrorPlugins:function(){var e=this;return[new ye.Sy({key:new ye.H$("markdownClipboardCopy"),props:{clipboardTextSerializer:function(r){var n,s,l=e.editor.schema.topNodeType.createAndFill(void 0,r.content);return l&&((n=e.editor.storage.markdown)===null||n===void 0||(s=n.getMarkdown)===null||s===void 0?void 0:s.call(n,l))||""}}})]}}),Re=o(83578),rt=o(335),me=o.n(rt),it=function(e){return e.schema.nodes.codeBlock&&(0,E.Ig)(e,"codeBlock")||e.schema.marks.code&&(0,E.yw)(e,"code")},st=function(e){var t=e.match(/^```/gm);if(t&&t.length>1||e.match(/\[[^]+]\(https?:\/\/\S+\)/gm)||e.match(/\[[^]+]\(\/\S+\)/gm)||e.match(/^#{1,6}\s+\S+/gm)||e.match(/^!{1,3}\s+\S+/gm)||e.match(/^!-\s+\S+$/gm)||e.match(/^!~\s+\S+$/gm))return!0;var r=e.match(/^\s*[\d-*]\s+\S+/gm);if(r&&r.length>1)return!0;var n=e.match(/^\s*[-*]\s\[[ xX]\]\s+\S+/gm);return!!(n&&n.length>1||e.match(/^>\s+\S+/gm)||e.match(/^---/gm)||e.match(/^!\[[^]+]\(https?:\/\/\S+\)/gm)||e.match(/^\|.*\|$/gm)||e.match(/\*\*[^]+?\*\*/gm)||e.match(/_[^]+?_/gm)||e.match(/~~[^]+?~~/gm)||e.match(/`[^]+?`/gm))},ot=function(e){var t=/<div class="a-tiptap-title(\d)">([\s\S]*?)<\/div>/g,r=e.matchAll(t),n=e,s=me()(r),l;try{for(s.s();!(l=s.n()).done;){var i=l.value,f=parseInt(i[1]),d=i[2].trim(),p="".concat("!".repeat(f)," ").concat(d);n=n.replace(i[0],p)}}catch(h){s.e(h)}finally{s.f()}return n},lt=function(e){var t=/<div class="a-tiptap-wenhao">([\s\S]*?)<\/div>/g,r=e.matchAll(t),n=e,s=me()(r),l;try{for(s.s();!(l=s.n()).done;){var i=l.value,f=i[1].trim().length,d=i[1].trim(),p="".concat("!~".repeat(f>1?1:f)," ").concat(d);n=n.replace(i[0],p)}}catch(h){s.e(h)}finally{s.f()}return n},dt=function(e){var t=/<div class="a-tiptap-tail">([\s\S]*?)<\/div>/g,r=e.matchAll(t),n=e,s=me()(r),l;try{for(s.s();!(l=s.n()).done;){var i=l.value,f=i[1].trim(),d="!- ".concat(f);n=n.replace(i[0],d)}}catch(p){s.e(p)}finally{s.f()}return n},Le=function(e){var t=/^!-\s+(.*)$/gm,r=e.matchAll(t),n=e,s=me()(r),l;try{for(s.s();!(l=s.n()).done;){var i=l.value,f=i[1].trim(),d='<div class="a-tiptap-tail">'.concat(f,"</div>");n=n.replace(i[0],d)}}catch(p){s.e(p)}finally{s.f()}return n},Pe=function(e){var t=/^!~\s+(.*)$/gm,r=e.matchAll(t),n=e,s=me()(r),l;try{for(s.s();!(l=s.n()).done;){var i=l.value,f=i[1].trim(),d='<div class="a-tiptap-wenhao">'.concat(f,"</div>");n=n.replace(i[0],d)}}catch(p){s.e(p)}finally{s.f()}return n},Oe=function(e){var t=/^(!{1,3})\s+(.*)$/gm,r=e,n=e.matchAll(t),s=me()(n),l;try{for(s.s();!(l=s.n()).done;){var i=l.value,f=i[1],d=f.length,p=i[2].trim(),h='<div class="a-tiptap-title'.concat(d,'">').concat(p,"</div>");r=r.replace(i[0],h)}}catch(x){s.e(x)}finally{s.f()}return r},ut=E.hj.create({name:"markdownClipboardPaste",priority:50,addProseMirrorPlugins:function(){var e=this;return[new ye.Sy({key:new ye.H$("markdownClipboardPaste"),props:{handlePaste:function(r,n){var s=e.editor.isEditable,l=n.clipboardData;if(!s||!l||l.files.length!==0)return!1;var i=l.getData("text/plain"),f=l.getData("text/html");if(f.length>0)return!1;if(it(r.state))return n.preventDefault(),r.dispatch(r.state.tr.insertText(i)),!0;if(st(i)){var d,p,h=Le(i);h=Pe(h),h=Oe(h);var x=(d=e.editor.storage.markdown)===null||d===void 0||(d=d.parser)===null||d===void 0||(p=d.parse)===null||p===void 0?void 0:p.call(d,h,{inline:!1});if(console.log("html",x),!x||typeof x!="string")return!1;var j=Re.aw.fromSchema(e.editor.schema),S=(0,E.q_)(x),D=j.parse(S,{});console.log("node",D);var P=D.content,b=r.state.selection.content();return r.dispatch(r.state.tr.replaceSelection(new Re.p2(P,b.openStart,b.openEnd))),!0}return!1}}})]}}),ct=nt.U.extend({name:"markdown",priority:50,addOptions:function(){var e;return C()(C()({},(e=this.parent)===null||e===void 0?void 0:e.call(this)),{},{paste:!0,copy:!0})},onBeforeCreate:function(){var e,t=this;(e=this.parent)===null||e===void 0||e.call(this),this.editor.storage.markdown.getMarkdown=function(r){var n=t.editor.storage.markdown.serializer.serialize(r!=null?r:t.editor.state.doc);return n=ot(n),n=lt(n),n=dt(n),n}},addExtensions:function(){return[].concat(Be()(this.options.copy?[at]:[]),Be()(this.options.paste?[ut]:[]))},onCreate:function(){this.editor.options.content=this.editor.options.initialContent,delete this.editor.options.initialContent}}),pt=o(88698),ht=E.hj.create({name:"starterKit",addExtensions:function(){var e=[],t=[];if(this.options.commands!==!1&&e.push(a.Gh),this.options.highPriorityKeymap!==!1&&e.push(a.Yg),this.options.lowPriorityKeymap!==!1&&e.push(a.vR),this.options.document!==!1&&e.push(m.B),this.options.paragraph!==!1&&(e.push(g.n.configure(this.options.paragraph)),t.push("paragraph")),this.options.text!==!1&&e.push(A.x),this.options.textAlign!==!1&&e.push(B.P.configure(C()({types:["heading","paragraph"]},this.options.textAlign))),this.options.bold!==!1&&e.push(Ge.d8.configure(this.options.bold)),this.options.italic!==!1&&e.push(Xe.Tx.configure(this.options.italic)),this.options.strike!==!1&&e.push(Ye.Re.configure(this.options.strike)),this.options.code!==!1&&e.push(Qe.EK.configure(this.options.code)),this.options.link!==!1&&e.push(fe.rU.configure(this.options.link)),this.options.heading!==!1&&(e.push(F.X.configure(this.options.heading)),t.push("heading")),this.options.blockquote!==!1&&(e.push(Ze.V6.configure(this.options.blockquote)),t.push("blockquote")),this.options.hardBreak!==!1&&e.push(I.U.configure(this.options.hardBreak)),this.options.horizontalRule!==!1&&(e.push(et.b.configure(this.options.horizontalRule)),t.push("horizontalRule")),this.options.listsIndentation!==!1&&e.push(ve.R_.configure(this.options.listsIndentation)),this.options.indentation!==!1&&e.push(q.I.configure(this.options.indentation)),this.options.bulletList!==!1&&e.push(V.D.configure(this.options.bulletList)),this.options.orderedList!==!1&&e.push(M.G.configure(this.options.orderedList)),(this.options.bulletList!==!1||this.options.orderedList!==!1)&&e.push(Ee.H.configure(this.options.listItem)),this.options.taskList!==!1&&(e.push(De.a.configure(this.options.taskList)),e.push(Je.Uf.configure(this.options.taskItem))),(this.options.bulletList!==!1||this.options.orderedList!==!1||this.options.taskList!==!1)&&t.push("list"),this.options.codeBlock!==!1&&(e.push(qe.dn.configure(this.options.codeBlock)),t.push("codeBlock")),this.options.image!==!1&&(this.options.uploader!==!1?(e.push(ae.Ee.configure(this.options.image)),t.push("image")):console.warn("Uploader extension is required for image extension. Please enable uploader extension.")),this.options.table!==!1){var r=Y.pj.extend({content:"(".concat(t.join(" | "),")+")});e.push(Y.iA.configure(this.options.table)),e.push(Y.SC.configure(this.options.tableRow)),e.push(r.configure(this.options.tableCell))}return this.options.emoji!==!1&&e.push(Se.dy.configure(C()({enableEmoticons:!0,forceFallbackImages:!1,suggestion:Se.Jz},this.options.emoji))),this.options.history!==!1&&e.push(X.A.configure(this.options.history)),this.options.dropcursor!==!1&&e.push(he.m.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&e.push($.f),this.options.uploader!==!1&&e.push(pt.Qm.configure(this.options.uploader)),this.options.markdown!==!1&&e.push(ct.configure(C()({linkify:!0,breaks:!0,tightLists:!0,paste:!0,copy:!1},this.options.markdown))),e}}),qt=null,He=o(35605),_=o(24692),u=o(11527),ft=function(e){var t=e.className,r=e.style,n=e.title,s=(0,_.W6)(function(){return{isActive:function(){return(0,a.zh)(l.state,"link")},disabled:function(){return!l.state.schema.marks.link||!l.can().chain().focus().toggleMark("link").run()}}}),l=s.editor,i=s.statusMap;return(0,u.jsx)(_.o1,{className:t,style:r,children:(0,u.jsx)(_.u,{text:n||"\u94FE\u63A5 (".concat(_.WD," + K)"),children:(0,u.jsx)(_.zx,{onClick:function(){var d,p;return l==null||(d=(p=l.chain().focus()).toggleLink)===null||d===void 0?void 0:d.call(p,{href:""}).run()},isActive:i==null?void 0:i.isActive,disabled:i==null?void 0:i.disabled,children:(0,u.jsx)(He.c9z,{})})})})},vt=o(78498),xe=o(67761),mt=function(e){var t=e.text,r=e.href,n=e.onConfirm,s=e.onCancel,l=(0,k.useRef)(null),i=(0,k.useRef)(null),f=(0,k.useState)(t),d=R()(f,2),p=d[0],h=d[1],x=(0,k.useState)(r),j=R()(x,2),S=j[0],D=j[1],P=(0,k.useCallback)(function(){n==null||n({text:p||S,href:S})},[n,p,S]);return(0,k.useEffect)(function(){var b=setTimeout(function(){if(p){if(!S){var O;(O=i.current)===null||O===void 0||O.focus()}}else{var T;(T=l.current)===null||T===void 0||T.focus()}},200);return function(){clearTimeout(b)}},[]),(0,u.jsxs)("div",{className:"tide-editor-popup tide-link-popup",children:[(0,u.jsxs)("div",{className:"tide-link-popup__row",children:[(0,u.jsx)("label",{className:"tide-link-popup__label",children:"\u6587\u672C"}),(0,u.jsx)("input",{className:"tide-link-popup__input",ref:l,value:p,onChange:function(T){return h(T.target.value)}})]}),(0,u.jsxs)("div",{className:"tide-link-popup__row",children:[(0,u.jsx)("label",{className:"tide-link-popup__label",children:"\u94FE\u63A5"}),(0,u.jsx)("input",{className:"tide-link-popup__input",ref:i,value:S,onChange:function(T){return D(T.target.value)},onKeyDown:function(T){T.key==="Enter"&&S&&P()}})]}),(0,u.jsxs)("div",{className:"tide-link-popup__btn-group",children:[(0,u.jsx)("button",{className:"tide-link-popup__button tide-link-popup__button--basic",style:{marginLeft:8},onClick:s,children:"\u53D6\u6D88"}),(0,u.jsx)("button",{className:"tide-link-popup__button tide-link-popup__button--primary",onClick:P,disabled:!S,children:"\u786E\u5B9A"})]})]})},gt=function(e,t){var r=t||{},n=r.dom,s=r.defaultText,l=r.defaultHref,i=e.state,f=e.schema,d=i.selection,p=d.$from,h=d.from,x=d.to,j=d.empty,S=(0,E.TP)(f.marks.link,i.schema),D=(0,a.zh)(i,S.name),P=e.getAttributes(S),b,T;if(!D)b=h,T=x;else{var O;if(j){var w=(0,E.IH)(p,S,P);w&&(O={from:w.from,to:w.to})}else O={from:h,to:x};if(!O)return;b=O.from,T=O.to}var z="",Q="";i.doc.nodesBetween(b,T,function(U,J,W,H){var K,_e;if(U.isInline){var oe=((K=(_e=U.type.spec).toText)===null||K===void 0?void 0:K.call(_e,{node:U,pos:J,parent:W,index:H}))||U.textContent||"";z+=Be()(oe).slice(Math.max(0,b-J),Math.max(0,T-J)).join("")}}),D?(z=z||i.doc.textBetween(b,T)||"",Q=P.href):(z=z||i.doc.textBetween(b,T)||s||"",Q=l||""),(0,xe.Zr)({editor:e,placement:"bottom-start",componentRender:function(J){return new xe.M_(mt,{props:{text:z,href:Q,onConfirm:function(H){var K;z===H.text?e.chain().setTextSelection({from:b,to:T}).setLink({href:H.href}).run():(e.chain().deleteRange({from:b,to:T}).insertContentAt(b,H.text,{updateSelection:!0}).run(),e.chain().command(function(_e){var oe=_e.tr,Me=Math.min(b,oe.selection.from),le=oe.selection.to;return oe.setSelection(ye.Bs.create(oe.doc,Me,le)),!0}).setLink({href:H.href}).run()),(K=J.instance)===null||K===void 0||K.hide(),e.commands.focus()},onCancel:function(){var H;(H=J.instance)===null||H===void 0||H.hide(),e.commands.focus()}},editor:e})},tippyOptions:{getReferenceClientRect:function(){return n?n.getBoundingClientRect():(0,E.pr)(e.view,b,T)}}})},_t=/(?:^|\s)\[(.+?)]\((.+?)\)\s$/,Et=vt.rU.extend({inclusive:!1,name:"link",addOptions:function(){var e;return C()(C()({},(e=this.parent)===null||e===void 0?void 0:e.call(this)),{},{openOnClick:!1,linkOnPaste:!1,autolink:!0})},addAttributes:function(){return{href:{default:null,parseHTML:function(t){var r;return"".concat((r=t.getAttribute("href"))!==null&&r!==void 0?r:"")}},target:{default:this.options.HTMLAttributes.target},"data-id":{default:null,parseHTML:function(t){var r;return"".concat((r=t.getAttribute("data-id"))!==null&&r!==void 0?r:"")}}}},parseHTML:function(){return[{tag:'a[href]:not([href *= "javascript:" i]):not([data-type])'}]},addCommands:function(){var e,t=this;return C()(C()({},(e=this.parent)===null||e===void 0?void 0:e.call(this)),{},{toggleLink:function(n){return function(s){var l=s.chain,i=s.editor;return(0,a.zh)(i.state,t.name)?l().unsetLink().run():(gt(t.editor,{defaultHref:n.href}),!0)}}})},addKeyboardShortcuts:function(){var e=this;return{"Mod-k":function(){return e.editor.chain().toggleLink({href:""}).run()}}},addInputRules:function(){return[(0,E.Cf)({find:_t,type:this.type,getAttributes:function(t){var r=R()(t,3),n=r[2];return t.pop(),{href:n}}})]}}),en=function(e){var t=e.editor,r=useRef(null),n=useState(""),s=_slicedToArray(n,2),l=s[0],i=s[1],f=useState(""),d=_slicedToArray(f,2),p=d[0],h=d[1],x=useCallback(function(){var D=isActive(t.state,LinkExtension.name);if(D){var P=t.getAttributes(LinkExtension.name);i(P.href||""),h(P.target||"")}else i(""),h("");return D},[t]),j=useCallback(function(){t.chain().blur().focus().run(),showLinkEditPopup(t)},[t]),S=useCallback(function(){var D=t.view.state.selection.empty;if(D){var P=t.getAttributes(LinkExtension.name);t.chain().extendMarkRange(LinkExtension.name,P).unsetLink().run()}else t.chain().unsetLink().run()},[t]);return t.state.schema.marks.link?_jsx(SelectionBubbleMenu,{pluginKey:"linkBubbleMenu",editor:t,shouldShow:x,reference:"mark",referenceMarkType:LinkExtension.name,placement:"bottom-start",children:_jsxs("div",{ref:r,className:"tide-menu-bar tide-menu-bar-bubble",children:[_jsx("span",{className:"tide-menu-bar-bubble__link",children:_jsx("a",{href:l,target:p,rel:"noopener noreferrer nofollow",children:l})}),_jsx("button",{className:"tide-menu-bar__btn tide-menu-bar__item",onClick:j,children:_jsx(IconPenBold,{})}),_jsx("button",{className:"tide-menu-bar__btn tide-menu-bar__item",onClick:S,children:_jsx(IconChainSlashBold,{})})]})}):null},yt=o(25298),Fe=o.n(yt),xt=o(17069),Ie=o.n(xt),Ct=o(62657),ge=o.n(Ct),At=o(9504),ke=o.n(At),bt=o(38836),je=o.n(bt),Bt=o(21742),kt=o.n(Bt),jt=o(83136),Tt=o.n(jt),Mt=o(82092),ie=o.n(Mt),Dt=["readOnlyEmptyView","readOnlyShowMenu","menuEnableUndoRedo","menuEnableFullscreen","fullscreen","onFullscreenChange","onReady","onChange"],St=function(c){kt()(t,c);var e=Tt()(t);function t(r){var n;Fe()(this,t);var s=r.readOnlyEmptyView,l=r.readOnlyShowMenu,i=l===void 0?!1:l,f=r.menuEnableUndoRedo,d=f===void 0?!0:f,p=r.menuEnableFullscreen,h=p===void 0?!0:p,x=r.fullscreen,j=x===void 0?!1:x,S=r.onFullscreenChange,D=r.onReady,P=r.onChange,b=Z()(r,Dt);return n=e.call(this,C()(C()({extensions:[m.B,g.n,A.x],editorProps:{attributes:{spellCheck:"false"}}},b),{},{onCreate:function(O){var w,z=O.editor,Q=z.state,U=z.view;if(Q.plugins.length>0){var J=[],W=[];Q.plugins.forEach(function(H){H.key.includes("Suggestion")?W.push(H):J.push(H)}),U.updateState(Q.reconfigure({plugins:[].concat(W,J)}))}(w=b.onCreate)===null||w===void 0||w.call(b,O),D==null||D(O.editor)},onUpdate:function(O){var w;(w=b.onUpdate)===null||w===void 0||w.call(b,O),P==null||P(O.editor.getJSON(),O.editor)}})),ie()(ge()(n),"readOnlyEmptyView",void 0),ie()(ge()(n),"readOnlyShowMenu",void 0),ie()(ge()(n),"menuEnableUndoRedo",void 0),ie()(ge()(n),"menuEnableFullscreen",void 0),ie()(ge()(n),"fullscreen",void 0),ie()(ge()(n),"onFullscreenChange",void 0),n.readOnlyEmptyView=s,n.readOnlyShowMenu=i,n.menuEnableUndoRedo=d,n.menuEnableFullscreen=h,n.fullscreen=j,n.onFullscreenChange=S,n}return Ie()(t,[{key:"setFullscreen",value:function(n){var s;this.fullscreen=n,(s=this.onFullscreenChange)===null||s===void 0||s.call(this,n,this),this.emit("update",{editor:this,transaction:this.state.tr}),n&&this.commands.focus(this.options.autofocus)}},{key:"setContent",value:function(n,s,l){return typeof n=="string"&&(n=Pe(n),n=Le(n),n=Oe(n)),this.commands.setContent(n,s,l)}},{key:"getMarkdown",value:function(){var n,s;return((n=this.storage.markdown)===null||n===void 0||(s=n.getMarkdown)===null||s===void 0?void 0:s.call(n))||""}},{key:"isReadOnly",get:function(){return!this.isEditable}},{key:"on",value:function(n,s){return ke()(je()(t.prototype),"on",this).call(this,n,s)}},{key:"emit",value:function(n){for(var s,l=arguments.length,i=new Array(l>1?l-1:0),f=1;f<l;f++)i[f-1]=arguments[f];return(s=ke()(je()(t.prototype),"emit",this)).call.apply(s,[this,n].concat(i))}},{key:"off",value:function(n,s){return ke()(je()(t.prototype),"off",this).call(this,n,s)}}]),t}(xe.ML),Rt=o(82187),se=o.n(Rt),We=function(e){var t=e.editor,r=e.contentClassName,n=e.contentStyle,s=e.children,l=se()("tide-content",r);return t&&t.isEmpty&&t.isReadOnly?(0,u.jsx)("div",{className:l,style:n,children:t.readOnlyEmptyView||null}):(0,u.jsx)(xe.kg,{className:l,style:n,editor:t,children:s})};We.displayName="EditorContent";var Ne=(0,k.createContext)(null),we=function(){var e=(0,k.useContext)(Ne);if(e===null)throw new Error("useEditorContext must be used within a EditorContextProvider");return e},Lt=function(e){var t=e.editor,r=e.children,n=(0,k.useState)(!!(t!=null&&t.isEditable)),s=R()(n,2),l=s[0],i=s[1],f=(0,k.useState)(!!(t!=null&&t.fullscreen)),d=R()(f,2),p=d[0],h=d[1],x=k.useMemo(function(){return{editable:l,fullscreen:p,setEditable:i,setFullscreen:h,editor:t}},[l,p,t]);return(0,k.useEffect)(function(){if(t){i(!!(t!=null&&t.isEditable)),h(!!(t!=null&&t.fullscreen));var j=function(D){i(D.editor.isEditable),h(D.editor.fullscreen)};return t==null||t.on("update",j),function(){t==null||t.off("update",j)}}},[t]),(0,u.jsx)(Ne.Provider,{value:x,children:r})},Pt=function(e){var t=e.style,r=e.className,n=e.children,s=we(),l=s.fullscreen,i=se()("tide-editor",{"tide-editor--fullscreen":l},r);return(0,u.jsx)("div",{className:i,style:t,children:n})},Ot=function(e){var t=e.editor,r=e.className,n=e.style,s=e.children;return(0,u.jsx)(Lt,{editor:t,children:(0,u.jsx)(Pt,{style:n,className:r,children:s})})},Ue=(0,k.forwardRef)(function(c,e){var t=c.disabled,r=c.style,n=c.isActive,s=c.children,l=c.onClick;return(0,u.jsx)("button",{style:r,ref:e,onClick:l,disabled:t,className:se()("tide-menu-bar__btn",{"tide-menu-bar__btn--active":n,"tide-menu-bar__btn--disabled":t}),children:s})});Ue.displayName="TextButton";var Ke=Ue,Ht=function(e){var t=e.className,r=e.style,n=e.title,s=(0,_.W6)(function(){return{isActive:function(){return(0,a.zh)(l.state,"ATail")},disabled:function(){return!l.state.schema.nodes.ATail||!l.can().toggleATail()}}}),l=s.editor,i=s.statusMap;return(0,u.jsx)(_.o1,{className:t,style:r,children:(0,u.jsx)(_.u,{text:"\u843D\u6B3E",children:(0,u.jsx)(Ke,{onClick:function(){return l.chain().focus().toggleATail().run()},isActive:i==null?void 0:i.isActive,disabled:i==null?void 0:i.disabled,style:{width:48,justifyContent:"center",display:"flex",alignItems:"center"},children:"\u843D\u6B3E"})})})},Ft=o(35182),Te=["ATitle1","ATitle2","ATitle3",1,2,3],$e={ATitle1:"\u5927\u6807\u9898",ATitle2:"\u5C0F\u6807\u9898(\u7AE0)",ATitle3:"\u5B50\u6807\u9898(\u8282)"},It=function(){var e=(0,k.useState)(!1),t=R()(e,2),r=t[0],n=t[1],s=(0,_.W6)(function(){var d={paragraphIsActive:function(){return(0,a.zh)(l.state,"paragraph")},paragraphIsDisabled:function(){return!l.can().setParagraph()}};return Te.forEach(function(p){if(typeof p=="number")d["heading".concat(p,"IsActive")]=function(){return(0,a.zh)(l.state,"heading",{level:p})},d["heading".concat(p,"Disabled")]=function(){var x,j;return!l.state.schema.nodes.heading||!((x=(j=l.can()).toggleHeading)!==null&&x!==void 0&&x.call(j,{level:p}))};else{var h=p.split("").pop();d["".concat(p,"IsActive")]=function(){return(0,a.zh)(l.state,"ATitle",{level:Number(h)})},d["".concat(p,"Disabled")]=function(){var x,j;return!l.state.schema.nodes.heading||!((x=(j=l.can()).toggleATitle)!==null&&x!==void 0&&x.call(j,{level:Number(h)}))}}}),d}),l=s.editor,i=s.statusMap,f=function(){if(i!=null&&i.paragraphIsActive)return"\u6B63\u6587";var p=Te.find(function(h){return typeof h=="number"?i==null?void 0:i["heading".concat(h,"IsActive")]:i==null?void 0:i["".concat(h,"IsActive")]});return typeof p=="number"?"\u6807\u9898 ".concat(p):$e[p]||"\u6B63\u6587"};return(0,u.jsx)(_.o1,{children:(0,u.jsx)(Ft.ZP,{placement:"bottom-start",interactive:!0,onClickOutside:function(){return n(!1)},visible:r,content:(0,u.jsx)("div",{className:"tide-dropdown-menu",children:(0,u.jsxs)("div",{className:"tide-dropdown-menu__content",children:[(0,u.jsx)("div",{onClick:function(){if(i!=null&&i.paragraphIsDisabled||!l.can().chain().focus().setParagraph().run())return!1;l.chain().focus().setParagraph().run(),n(!1)},className:se()("tide-dropdown-menu__item",{"tide-dropdown-menu__item--active":i==null?void 0:i.paragraphIsActive,"tide-dropdown-menu__item--disabled":i==null?void 0:i.paragraphIsDisabled}),children:(0,u.jsxs)("div",{className:se()("tide-menu-head-row"),children:[(0,u.jsx)("span",{children:"\u6B63\u6587"}),(0,u.jsx)("span",{className:"tide-menu-head-row__span",children:"".concat(_.WD," + ").concat(_.Kw," + 0")})]})}),Te.map(function(d){return(0,u.jsx)("li",{onClick:function(){if(typeof d=="number"){if(i!=null&&i["heading".concat(d,"Disabled")]||!l.can().chain().focus().toggleHeading({level:d}).run())return!1}else{var h=d.split("").pop();if(i!=null&&i["".concat(d,"Disabled")]||!l.can().chain().focus().toggleATitle({level:Number(h)}).run())return!1}if(typeof d=="number")l.chain().focus().toggleHeading({level:d}).run();else{var x=d.split("").pop();l.chain().focus().toggleATitle({level:Number(x)}).run()}n(!1)},className:se()("tide-dropdown-menu__item",{"tide-dropdown-menu__item--active":i==null?void 0:i["heading".concat(d,"IsActive")],"tide-dropdown-menu__item--disabled":i==null?void 0:i["heading".concat(d,"Disabled")]}),children:(0,u.jsxs)("div",{className:se()("tide-menu-head-row"),children:[(0,u.jsx)("span",{className:"tide-menu-head-row__title--level".concat(d),children:$e[d]||"".concat(d,"\u7EA7\u6807\u9898")}),typeof d=="number"&&(0,u.jsx)("span",{className:"tide-menu-head-row__span",children:"".concat(_.WD," + ").concat(_.Kw," + ").concat(d)})]})},d)})]})}),children:(0,u.jsxs)("div",{className:"tide-dropdown-trigger",onClick:function(){return n(!r)},children:[(0,u.jsx)("span",{className:"tide-dropdown-trigger__head-text",children:f()}),(0,u.jsx)(He.KCe,{className:"tide-dropdown-trigger__head-icon"})]})})})},Wt=function(e){var t=e.className,r=e.style,n=(0,_.W6)(function(){return{isActive:function(){return(0,a.zh)(s.state,"AWenHao")},disabled:function(){return!s.state.schema.nodes.AWenHao||!s.can().toggleWenHao()}}}),s=n.editor,l=n.statusMap;return(0,u.jsx)(_.o1,{className:t,children:(0,u.jsx)(_.u,{text:"\u6587\u53F7",children:(0,u.jsx)(Ke,{onClick:function(){return s.chain().focus().toggleWenHao().run()},isActive:l==null?void 0:l.isActive,disabled:l==null?void 0:l.disabled,style:{width:48,justifyContent:"center",display:"flex",alignItems:"center"},children:"\u6587\u53F7"})})})},Nt=function(e){var t=e.editor,r=e.disabledMenu,n=r===void 0?!1:r,s=e.menuClassName,l=e.menuStyle,i=we(),f=i.fullscreen,d=i.editable,p=(0,k.useMemo)(function(){if(!t)return null;var h=t.state.schema.nodes,x=h.AWenHao,j=h.ATail,S=h.ALink,D=h.ATitle,P=h.bulletList,b=h.orderedList,T=h.taskList,O=h.image,w=h.table,z=h.codeBlock,Q=h.blockquote,U=h.horizontalRule,J=h.emoji,W=t.state.schema.marks,H=W.bold,K=W.italic,_e=W.strike,oe=W.link,Me=W.code;return[[t.menuEnableUndoRedo&&(0,u.jsx)(_.WP,{},"undo"),t.menuEnableUndoRedo&&(0,u.jsx)(_.Jw,{},"redo")],[D&&(0,u.jsx)(It,{},"ATitle"),j&&(0,u.jsx)(Ht,{},"ATail"),x&&(0,u.jsx)(Wt,{},"AWenhao"),H&&(0,u.jsx)(_.d8,{},"bold"),K&&(0,u.jsx)(_.Tx,{},"italic"),_e&&(0,u.jsx)(_.Re,{},"strike"),Me&&(0,u.jsx)(_.EK,{},"code")],[P&&(0,u.jsx)(_.DY,{},"bulletList"),b&&(0,u.jsx)(_.GS,{},"orderedList"),T&&(0,u.jsx)(_.ax,{},"taskList")],[oe&&(0,u.jsx)(ft,{},"link"),O&&(0,u.jsx)(_.Ee,{},"image"),w&&(0,u.jsx)(_.iA,{},"table"),z&&(0,u.jsx)(_.dn,{},"codeBlock")],[Q&&(0,u.jsx)(_.V6,{},"blockquote"),U&&(0,u.jsx)(_.bo,{},"horizontalRule"),J&&(0,u.jsx)(_.dy,{},"emoji")],[t.menuEnableFullscreen&&(0,u.jsx)(_.iT,{fullscreen:f,onFullscreenChange:function(Ae){t.setFullscreen(Ae)}},"fullscreen")]].map(function(le){return le.filter(Boolean)}).filter(function(le){return le.length>0}).map(function(le,Ae,Qt){return(0,u.jsxs)(k.Fragment,{children:[le,Ae<Qt.length-1&&(0,u.jsx)(_.uy,{})]},Ae)})},[t,d,f,t==null?void 0:t.menuEnableUndoRedo,t==null?void 0:t.menuEnableFullscreen]);return!d&&!(t!=null&&t.readOnlyShowMenu)?null:(0,u.jsx)(_.j_,{className:se()(s,{disabled:(t==null?void 0:t.readOnlyShowMenu)||n}),style:l,children:p})},ze=function(e){var t=e.editor,r=e.className,n=e.style,s=e.menuClassName,l=e.menuStyle,i=e.contentClassName,f=e.contentStyle;return t?(0,u.jsx)(Ot,{editor:t,style:n,className:r,children:(0,u.jsxs)(_.lv,{editor:t,children:[(0,u.jsx)(Nt,{editor:t,menuStyle:l,menuClassName:s}),(0,u.jsxs)(We,{editor:t,contentStyle:f,contentClassName:i,children:[(0,u.jsx)(fe.dC,{editor:t}),(0,u.jsx)(Y.d6,{editor:t}),(0,u.jsx)(ae.El,{editor:t}),(0,u.jsx)(_.OA,{editor:t})]})]})}):null};ze.displayName="EditorRender";var wt=function(e,t){return(0,xe.jE)(St,e,t)},Ut=["starterKitOpt","parseOptions","editorProps","mode","onChange","debug","height","value","style","onReady"],Kt=function(){var c=G()(te()().mark(function e(t,r){var n,s;return te()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n="",s=new FileReader,s.onload=function(){n=s.result},s.readAsDataURL(t),console.log("file",t),i.abrupt("return",new Promise(function(f){var d=1,p=setInterval(function(){d++,r(d*10),d>=10&&(clearInterval(p),f(n))},300)}));case 6:case"end":return i.stop()}},e)}));return function(t,r){return c.apply(this,arguments)}}(),$t=function(e){var t=e.starterKitOpt,r=e.parseOptions,n=e.editorProps,s=e.mode,l=s===void 0?"json":s,i=e.onChange,f=e.debug,d=e.height,p=d===void 0?500:d,h=e.value,x=e.style,j=e.onReady,S=Z()(e,Ut),D=k.useState(!1),P=R()(D,2),b=P[0],T=P[1],O=k.useState(),w=R()(O,2),z=w[0],Q=w[1],U=wt({extensions:[re,y,N,Et,ht.configure(C()({link:!1,uploader:{image:{uploader:S.imageUploader||Kt}}},t))],onChange:function(W,H){var K;l==="json"?K=W:l==="md"?K=H.getMarkdown():K=H.getHTML(),Q(K),i==null||i(K,H)},editorProps:n,parseOptions:r||{},onReady:function(W){f&&console.log("editor onReady",W),j==null||j(W),T(!0)}});return(0,k.useEffect)(function(){b&&z!==h&&(f&&console.log("editor setContent",h),Q(h),U==null||U.setContent(h||""))},[h,b]),(0,u.jsx)("div",{className:"main",children:(0,u.jsx)(ze,C()({editor:U,style:C()({height:p},x)},S))})},zt=$t,Ve=o(99099),tn=null,Ce=null,Vt=function(e,t){return Ce?(Ce.setJson(e),Ce.setConfig(t)):Ce=new Ve.ZP(e,t),Ce.render()},nn=function(e){if(!e)return[];for(var t=1,r=e.content,n=[],s=0;s<r.length;s++){var l=t++,i=r[s];if(i.type==="ATitle"||i.type==="heading"){var f={title:i.content[0].text,label:i.content[0].text,key:"".concat(l),value:"".concat(l),isLeaf:!0,children:[],pcode:"-1"};if(i.attrs.level===1)n.push(f);else if(i.attrs.level===2&&n.length>0){var d=n[n.length-1];f.pcode=d.value,f.isLeaf=!1,d.children.push(f)}}}return n},Jt=function(){function c(){Fe()(this,c),ie()(this,"renderInstances",new Map)}return Ie()(c,[{key:"getRenderInstance",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"main",r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(this.renderInstances.has(t)){var l=this.renderInstances.get(t);l.setJson(r),l.setConfig(n)}else{var s=new Ve.ZP(r,n);this.renderInstances.set(t,s)}return this.renderInstances.get(t)}},{key:"removeRenderInstance",value:function(t){this.renderInstances.has(t)&&this.renderInstances.delete(t)}}],[{key:"getInstance",value:function(){return c.instance||(c.instance=new c),c.instance}}]),c}();ie()(Jt,"instance",void 0);var an=null,Zt=["onChange"],Gt=function(e){var t=e.onChange,r=Z()(e,Zt),n=function(l,i){t==null||t(l,i)};return(0,u.jsx)(zt,C()(C()({},r),{},{onChange:n}))},Xt=Gt,Yt=Xt},99099:function(be,ee,o){var de=o(15558),C=o.n(de),ue=o(26068),R=o.n(ue),L=o(25298),Z=o.n(L),ce=o(17069),te=o.n(ce),pe=o(82092),G=o.n(pe),k=o(50959),v=o(11527);function ne(N){if(!N)return{};var y={};if(N.indexOf("?")!==-1)for(var a=N.split("?")[1],m=a.split("&"),g=0;g<m.length;g++)y[m[g].split("=")[0]]=decodeURI(m[g].split("=")[1]);return y}function E(N){return N.reduce(function(y,a){return y+a},0)}var re=function(){function N(y,a){Z()(this,N),G()(this,"config",void 0),G()(this,"json",void 0),G()(this,"isAfterHardBreak",!1),this.config=a||{},this.json=y}return te()(N,[{key:"renderLink",value:function(a,m,g){var A,B=this,F={};if(a.type==="link"){var I;F=ne((I=a.attrs)===null||I===void 0?void 0:I.href)}var X=a.type==="link"?(0,v.jsx)("a",{title:"\u94FE\u63A5",href:(A=a.attrs)===null||A===void 0?void 0:A.href,onClick:function(){var $,Y;($=(Y=B.config).onLinkClick)===null||$===void 0||$.call(Y,F)},className:"",target:a.attrs.target,children:this.applyMarks({marks:m,text:g})},a.key):null;return this.config.linkRender?this.config.linkRender(X,a,F):X}},{key:"applyMarks",value:function(a){var m,g,A=a.marks,B=a.text;if(!A||A.length===0)return((m=(g=this.config).textRender)===null||m===void 0?void 0:m.call(g,B))||B;var F=A[0],I=A.slice(1);switch(F.type){case"link":return this.renderLink(F,I,B);case"bold":return this.renderBold(F.key,I,B);case"italic":return this.renderItalic(F.key,I,B);default:return this.applyMarks({marks:I,text:B})}}},{key:"renderBold",value:function(a,m,g){return(0,v.jsx)("strong",{children:this.applyMarks({marks:m,text:g})},a)}},{key:"renderItalic",value:function(a,m,g){return(0,v.jsx)("em",{children:this.applyMarks({marks:m,text:g})},a)}},{key:"renderText",value:function(a,m){return(0,v.jsx)("span",{style:m,children:this.applyMarks({marks:a.marks,text:a.text})},a.key)}},{key:"renderHeading",value:function(a){switch(a.attrs.level){case 1:return(0,v.jsx)("h1",{id:a.key,style:{textAlign:a.attrs.textAlign},children:this.renderContent(a.content)},a.key);case 2:return(0,v.jsx)("h2",{id:a.key,style:{textAlign:a.attrs.textAlign},children:this.renderContent(a.content)},a.key);case 3:return(0,v.jsx)("h3",{id:a.key,style:{textAlign:a.attrs.textAlign},children:this.renderContent(a.content)},a.key);case 4:return(0,v.jsx)("h4",{id:a.key,style:{textAlign:a.attrs.textAlign},children:this.renderContent(a.content)},a.key);case 5:return(0,v.jsx)("h5",{id:a.key,style:{textAlign:a.attrs.textAlign},children:this.renderContent(a.content)},a.key);case 6:return(0,v.jsx)("h6",{id:a.key,style:{textAlign:a.attrs.textAlign},children:this.renderContent(a.content)},a.key);default:return(0,v.jsx)("h1",{id:a.key,style:{textAlign:a.attrs.textAlign},children:this.renderContent(a.content)},a.key)}}},{key:"renderHardBreak",value:function(a){return this.isAfterHardBreak=!0,(0,v.jsx)("br",{},a.key)}},{key:"renderATitle",value:function(a){return(0,v.jsx)("div",{id:a.key,className:"a-tiptap-title".concat(a.attrs.level),children:this.renderContent(a.content)},a.key)}},{key:"renderATail",value:function(a){return(0,v.jsx)("div",{className:"a-tiptap-tail",children:this.renderContent(a.content)},a.key)}},{key:"renderAWenHao",value:function(a){return(0,v.jsx)("div",{className:"a-tiptap-wenhao",children:this.renderContent(a.content)},a.key)}},{key:"renderParagraph",value:function(a){return(0,v.jsx)("p",{children:(0,v.jsx)("br",{className:"ProseMirror-trailingBreak"})},a.key)}},{key:"renderHorizontalRule",value:function(a){return(0,v.jsx)("hr",{contentEditable:"false"},a.key)}},{key:"renderCodeBlock",value:function(a){return console.log("item",a),(0,v.jsx)("div",{className:"react-renderer node-codeBlock",children:(0,v.jsx)("div",{className:"tide-code-block",style:{whiteSpace:"normal"},children:(0,v.jsx)("div",{className:"tide-code-block__content",children:(0,v.jsx)("pre",{className:"hljs",children:(0,v.jsx)("code",{style:{whiteSpace:"pre-wrap"},children:(0,v.jsx)("div",{style:{whiteSpace:"initial",textIndent:0,fontSize:14},children:a.content.map(function(m){var g=m.text.replaceAll("\\n","<br>");return console.log("processedText",g),(0,v.jsx)("span",{dangerouslySetInnerHTML:{__html:g}},m.key)})})})})})})},a.key)}},{key:"renderRow",value:function(a){return(0,v.jsx)("tr",{children:a.content.map(function(m,g){var A=E(m.attrs.colwidth),B={width:"".concat(A,"px")};m.attrs.colspan>1&&(B.colSpan=m.attrs.colspan),m.attrs.rowspan>1&&(B.rowSpan=m.attrs.rowspan);var F=m.content[0].attrs;return delete F.indent,console.log("pattrs",F),(0,v.jsx)("td",R()(R()({},B),{},{style:{width:B.width},children:(0,v.jsx)("p",{style:R()({},F),children:m.content[0].content[0].text})}),g)})})}},{key:"renderTable",value:function(a){var m=this,g=[];a.content[0].content.forEach(function(B){g.push.apply(g,C()(B.attrs.colwidth))});var A=E(g);return(0,v.jsx)("div",{className:"tableWrapper",children:(0,v.jsx)("div",{className:"scrollWrapper",children:(0,v.jsx)("table",{style:{width:"".concat(A,"px"),tableLayout:"auto"},children:(0,v.jsx)("tbody",{children:a.content.map(function(B){return m.renderRow(B)})})})})})}},{key:"renderDefault",value:function(a){return(0,v.jsx)("p",{children:this.renderContent(a.content)},a.key)}},{key:"renderContent",value:function(a){var m=this;return a==null?void 0:a.map(function(g){if(g.type==="text"){var A=m.isAfterHardBreak?{paddingLeft:"2em"}:{};return m.isAfterHardBreak=!1,g.marks?m.renderText(g,A):(0,v.jsx)("span",{style:A,children:g.text},g.key)}return g.type==="hardBreak"?(m.isAfterHardBreak=!0,(0,v.jsx)("br",{},g.key)):(0,v.jsx)("span",{children:g.text},g.key)})}},{key:"renderType",value:function(a){return a.type==="hardBreak"?this.renderHardBreak(a):a.type==="ATitle"?this.renderATitle(a):a.type==="ATail"?this.renderATail(a):a.type==="AWenHao"?this.renderAWenHao(a):a.type==="paragraph"&&!a.content?this.renderParagraph(a):a.type==="horizontalRule"?this.renderHorizontalRule(a):a.type==="codeBlock"?this.renderCodeBlock(a):a.type==="heading"?this.renderHeading(a):a.type==="table"?this.renderTable(a):this.renderDefault(a)}},{key:"render",value:function(a,m){var g=this;return a&&(this.json=a),m&&(this.config=m),this.json?this.json.content?(0,v.jsx)("div",{className:"tide-content",children:(0,v.jsx)("div",{className:"tiptap ProseMirror",children:this.json.content.map(function(A){return g.renderType(A)})})}):(0,v.jsx)(v.Fragment,{}):(0,v.jsx)(v.Fragment,{})}},{key:"setConfig",value:function(a){a&&(this.config=a)}},{key:"setJson",value:function(a){this.json=a}}]),N}();ee.ZP=re}}]);
